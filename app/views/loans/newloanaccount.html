<div ng-controller="NewLoanAccAppController" class="content-container">
    <ul class="breadcrumb">
        <li ng-show="groupName">
            <a href="#/viewgroup/{{groupId}}">
                <strong>'{{groupName}}'</strong>
            </a>
        </li>
        <li ng-show="clientName">
            <a href="#/viewclient/{{clientId}}">
                <strong>'{{clientName}}'</strong>
            </a>
        </li>
        <li class="active">{{'label.anchor.loanapplication' | translate}}</li>
    </ul>
    <wizard current-step="step" on-finish="submit()" class="card well">
        <wz-step icon="fa fa-circle-o" wz-title="{{'label.heading.details' | translate}}">
            <form name="Details" novalidate="" ng-submit="goNext(Details)" class="form-inline">
                <fieldset>
                    <api-validate></api-validate>
                    <hr>
                    <table class="" style="border-spacing: 10px; border-collapse: separate">
                        <tr>
                            <td class="width14">
                                <label>{{'label.anchor.prequalifications' | translate }}
                                    <span class="required">*</span>:&nbsp;
                                </label>
                                <i class="fa fa-question-circle"
                                   uib-tooltip="{{'label.tooltip.prequalification' | translate}}"></i>
                            </td>
                            <td class="width36 paddedbottom20">
                                <select id="prequalificationId" ng-model="formData.prequalificationId" required
                                        ng-options="prequalification.id as prequalification.prequalificationNumber + ' (' + prequalification.productName + ')' for prequalification in prequalificationOptions"
                                        value="{{prequalification}}"
                                        ng-change="prequalificationChange(formData.prequalificationId)"
                                        class="form-control width170px">
                                    <option style="display:none" value="">
                                        {{'label.input.select.prequalification' | translate}}
                                    </option>
                                </select>
                            </td>
                            <td class="width14">
                                <label>{{ 'label.input.product' | translate }}
                                    <span class="required">*</span>:&nbsp;
                                </label>
                                <i class="fa fa-question-circle"
                                   uib-tooltip="{{'label.tooltip.product' | translate}}"></i>
                            </td>
                            <td class="width36 paddedbottom20">
                                <select id="productId" ng-model="formData.productId" class="form-control width170px"
                                        ng-options="product.id as product.name for product in products"
                                        value="{{product.id}}" ng-change="loanProductChange(formData.productId)"
                                        class="form-control width170px"
                                        required="required" ng-disabled="true">
                                    <option style="display:none" value="">{{'label.selectloanproduct' | translate}}
                                    </option>
                                </select>
                            </td>
                            <td class="width14">
                                <label ng-show="formData.productId">{{ 'label.input.loanofficer' | translate }}:&nbsp;
                                </label>
                                <i ng-show="formData.productId" class="fa fa-question-circle"
                                   uib-tooltip="{{'label.tooltip.loanofficer' | translate}}"></i>
                            </td>
                            <td class="width36 paddedbottom20">
                                <select ng-show="formData.productId" id="loanOfficerId"
                                        ng-model="formData.loanOfficerId"
                                        ng-change="loandetails.loanOfficerName = formValue(loanaccountinfo.loanOfficerOptions,formData.loanOfficerId,'id','displayName')"
                                        ng-options="loanOfficer.id as loanOfficer.displayName for loanOfficer in loanaccountinfo.loanOfficerOptions | orderBy:'displayName':reverse"
                                        class="form-control width170px" value="{{loanOfficer.id}}">
                                    <option value="">{{'label.selectloanofficer' | translate}}</option>
                                </select>
                            </td>
                        </tr>
                        <tr ng-show="formData.productId">
                            <td class="width14">
                                <label>{{ 'label.input.loanpurpose' | translate }}:&nbsp;</label>
                                <i class="fa fa-question-circle"
                                   uib-tooltip="{{'label.tooltip.loanpurpose' | translate}}"></i>
                            </td>
                            <td class="width36 paddedbottom20">
                                <select chosen="loanaccountinfo.loanPurposeOptions" id="loanPurposeId"
                                        ng-model="formData.loanPurposeId"
                                        ng-change="loandetails.loanPurposeName = formValue(loanaccountinfo.loanPurposeOptions,formData.loanPurposeId,'id','name')"
                                        ng-options="loanPurpose.id as loanPurpose.name for loanPurpose in loanaccountinfo.loanPurposeOptions | orderBy:'name':reverse"
                                        class="form-control width170px" value="{{loanPurpose.id}}">
                                    <option value="">{{'label.selectpurpose' | translate}}</option>
                                </select>
                            </td>
                            <td class="width14"
                                ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.fundId == true">
                                <label>{{ 'label.input.fund' | translate }}:&nbsp;</label>
                            </td>
                            <td class="paddedbottom20 width36"
                                ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.fundId == true">
                                <select id="fundId" ng-model="formData.fundId" class="form-control width170px"
                                        ng-change="loandetails.fundName = formValue(loanaccountinfo.fundOptions,formData.fundId,'id','name')"
                                        ng-options="fund.id as fund.name for fund in loanaccountinfo.fundOptions"
                                        style="max-width:100px;left:0;" value="{{fund.id}}">
                                    <option value="" style="left:0;">{{'label.selectfund' | translate}}</option>
                                </select>
                            </td>
                        </tr>
                        <tr ng-show="formData.productId">
                            <td class="width14">
                                <label>{{ 'label.input.submittedon' | translate }}
                                    <span class="required">*</span>:&nbsp;
                                </label>
                                <i class="fa fa-question-circle"
                                   uib-tooltip="{{'label.tooltip.submittedon' | translate}}"></i>
                            </td>
                            <td class="paddedbottom20 width36">
                                <input type="text" id="submittedOnDate" name="submittedon" datepicker-pop="dd MMMM yyyy"
                                       ng-model="date.first" is-open="opened"
                                       min="'2000-01-01'" max="restrictDate" class="form-control"/>
                            </td>
                            <td class="width14">
                                <label title="{{ 'label.input.expecteddisbursementon' | translate }}">{{ 'label.input.disbursementon' | translate
                                    }}
                                    <span class="required">*</span>:&nbsp;
                                </label>
                                <i class="fa fa-question-circle"
                                   uib-tooltip="{{'label.tooltip.disbursementon' | translate}}"></i>
                            </td>
                            <td class="paddedbottom20 width36">
                                <input id="expectedDisbursementDate" sort type="text" name="expecteddisbursementon"
                                       datepicker-pop="dd MMMM yyyy" ng-model="date.second"
                                       is-open="opened1" min="minDate" class="form-control" required/>
                                <form-validate valattribute="expecteddisbursementon" valattributeform="Details"/>
                            </td>
                        </tr>
                        <tr ng-show="formData.productId">
                            <td class="width14">
                                <label>{{ 'label.input.externalid' | translate }}</label>
                                <i class="fa fa-question-circle"
                                   uib-tooltip="{{'label.tooltip.externalid' | translate}}"></i>
                            </td>
                            <td class="paddedbottom20 width36">
                                <input type="text" id="externalId" name="externalId" ng-model="formData.externalId"
                                       class="form-control"/>
                            </td>
                            <td></td>
                            <td></td>
                        </tr>
                    </table>
                    <div ng-hide="loanaccountinfo.calendarOptions == undefined">
                        <hr ng-show="loanaccountinfo"/>
                    </div>
                    <label ng-show="loanaccountinfo.calendarOptions">
                        <i class="fa fa-calendar "></i>&nbsp;
                        <strong>{{ 'label.heading.meetingdetails' | translate }}</strong>
                    </label>
                    <table ng-show="loanaccountinfo.calendarOptions" class=" width100">
                        <tr ng-repeat="calendar in loanaccountinfo.calendarOptions">
                            <td class="width14">
                                <label>{{ 'label.heading.startdate' | translate }}:</label>
                            </td>
                            <td class="width36">{{calendar.startDate | DateFormat}}</td>
                            <td class="width14">
                                <label>{{ 'label.heading.repeatson' | translate }}:</label>
                            </td>
                            <td class="width36">{{calendar.humanReadable}}</td>
                        </tr>
                        <tr ng-repeat="calendar in loanaccountinfo.calendarOptions">
                            <td align="center">
                                <input type="checkbox" ng-model="formData.syncRepaymentsWithMeeting"
                                       ng-change="syncRepaymentsWithMeetingchange()">
                            </td>
                            <td>
                                <label>{{ 'label.input.syncrepaymentswithmeeting' | translate }}</label>
                            </td>
                            <td align="center">
                                <input type="checkbox" ng-model="formData.syncDisbursementWithMeeting"
                                       ng-change="syncDisbursementWithMeetingchange()">
                            </td>
                            <td>
                                <label>{{ 'label.input.syncdisbursementdatewithmeeting' | translate }}</label>
                            </td>
                        </tr>
                    </table>
                    <div ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.linkAccountId == true && response.uiDisplayConfigurations.loanAccount.isHiddenField.createStandingInstruction == true">
                        <h3 ng-show="loanaccountinfo">{{ 'label.heading.savingsLinkage' | translate}}</h3>
                        <hr ng-show="loanaccountinfo">
                    </div>
                    <table ng-show="loanaccountinfo && !previewRepayment" class=" width100">
                        <tr>
                            <td class="width19"
                                ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.linkAccountId == true">
                                <label>{{ 'label.input.linksavings' | translate }}:</label>
                            </td>
                            <td class="width31 paddedbottom20"
                                ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.linkAccountId == true">
                                <select id="linkAccountId" ng-model="formData.linkAccountId"
                                        ng-options="savingaccount.id as savingaccount.productName for savingaccount in loanaccountinfo.accountLinkingOptions"
                                        ng-change="loandetails.linkAccountName = formValue(loanaccountinfo.accountLinkingOptions,formData.linkAccountId,'id','productName')"
                                        class="form-control width170px" value="{{savingaccount.id}}">
                                    <option value="">{{'label.menu.selectone' | translate}}</option>
                                </select>
                            </td>
                            <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.createStandingInstruction == true">
                                <label>{{ 'label.input.createStandingInstruction' | translate }}:</label>
                            </td>
                            <td class="width31"
                                ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.createStandingInstruction == true">
                                <input id="createStandingInstruction" class="input-mini-small" type="checkbox"
                                       ng-model="formData.createStandingInstructionAtDisbursement">
                            </td>
                        </tr>
                    </table>
                    <div ng-show="loanaccountinfo">
                        <h3>{{ 'label.heading.cupolinkage' | translate}}</h3>
                        <hr>
                    </div>
                    <div class="content" ng-show="loanaccountinfo">
                        <div class="row">
                            <div class="col-sm-2">
                                <label>{{ 'label.input.linkcupo' | translate }}:</label>
                            </div>
                            <div class="col-sm-3">
                                <select id="cupoId" ng-model="formData.cupoId"
                                        ng-options="cupo.id as (cupo.id + ' - ' + (cupo.expirationDate | DateFormat)) for cupo in loanaccountinfo.cupoLinkingOptions"
                                        class="form-control width170px">
                                    <option value="">{{'label.menu.selectone' | translate}}</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <button class="btn btn-default pull-left" wz-previous disabled ng-hide="disabled"><i
                            class="fa fa-arrow-left"></i>&nbsp;&nbsp;Previous
                    </button>
                    <button class="btn btn-default pull-right" type="submit" ng-hide="disabled">Next&nbsp;&nbsp;<i
                            class="fa fa-arrow-right"></i>
                    </button>
                    <div class="col-sm-offset-6">
                        <button class="btn btn-warning" ng-hide="!disabled" ng-click="cancel()">
                            {{'label.button.cancel' | translate}}
                        </button>
                    </div>
                </fieldset>
            </form>
        </wz-step>
        <wz-step wz-title="{{ 'label.heading.terms' | translate }}" wz-disabled="{{disabled}}">
            <form name="Terms" ng-submit="goNext(Terms)" class="form-inline">
                <fieldset>
                    <api-validate></api-validate>
                    <!--<h3>{{ 'label.heading.terms' | translate }}</h3>-->
                    <hr>
                    <table ng-show="loanaccountinfo" ng-hide="previewRepayment" class=" width100">
                        <tr>
                            <td class="width19">
                                <label>{{ 'label.input.principal' | translate }}&nbsp;
                                    <span class="required">*</span>:</label>
                            </td>
                            <td class="width31 paddedbottom20">
                                <input type="text" class="form-control" id="principal" name="principal"
                                       ng-model="formData.principal" number-format ng-pattern="/^(?!,$)[\d,.]+$/" required
                                       late-Validate ng-disabled="true"/>&nbsp;{{loanaccountinfo.currency.displaySymbol}}
                                <form-validate valattributeform="Terms" valattribute="principal"/>
                            </td>
                            <td class="width14">
                                <label>{{ 'label.input.loanterm' | translate }}&nbsp;
                                    <span class="required">*</span>:</label>
                            </td>
                            <td class="width36 paddedbottom20">
                                <input id="loanTermFrequency" class="form-control" name="loanterm" type="text"
                                       ng-model="formData.loanTermFrequency" required
                                       late-Validate/>
                                <select ng-disabled="response.uiDisplayConfigurations.loanAccount.isReadOnlyField.loanTermFrequencyType == true"
                                        id="loanTermFrequencyType"
                                        class="form-control" ng-model="formData.loanTermFrequencyType"
                                        ng-change="loandetails.loanTermFrequencyValue = formValue(loanaccountinfo.termFrequencyTypeOptions,formData.loanTermFrequencyType)"
                                        ng-options="termFrequencyType.id as termFrequencyType.code | translate for termFrequencyType in loanaccountinfo.termFrequencyTypeOptions"
                                        value="{{termFrequencyType.id}}"></select>
                                <form-validate valattributeform="Terms" valattribute="loanterm"/>
                            </td>
                        </tr>
                        <tr>
                            <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.numberOfRepayments == true">
                                <label>{{ 'label.input.numofrepayments' | translate }}&nbsp;
                                    <span class="required">*</span>
                                </label>
                            </td>
                            <td class="paddedbottom20"
                                ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.numberOfRepayments == true">
                                <input id="numberOfRepayments" class="form-control" name="numofrepayments" type="text"
                                       ng-model="formData.numberOfRepayments"
                                       required late-Validate>&nbsp;
                                <form-validate valattributeform="Terms" valattribute="numofrepayments"/>
                            </td>
                            <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.repaymentEvery == true">
                                <label>{{ 'label.input.repaidevery' | translate }}&nbsp;
                                    <span class="required">*</span>
                                </label>
                            </td>
                            <td class="paddedbottom20 width500px"
                                ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.repaymentEvery == true">

                                <input id="repaymentEvery" class="form-control" type="text" name="repaidevery"
                                       ng-model="formData.repaymentEvery"
                                       ng-disabled="!loanaccountinfo.product.allowAttributeOverrides.repaymentEvery"
                                       required late-Validate/>
                                <select id="repaymentFrequencyType" class="form-control"
                                        ng-model="formData.repaymentFrequencyType"
                                        ng-change="loandetails.repaymentFrequencyValue = formValue(loanaccountinfo.termFrequencyTypeOptions,formData.repaymentFrequencyType)"
                                        ng-options="repaymentFrequencyType.id as repaymentFrequencyType.code | translate for repaymentFrequencyType in loanaccountinfo.termFrequencyTypeOptions"
                                        ng-disabled="!loanaccountinfo.product.allowAttributeOverrides.repaymentEvery"
                                        value="{{repaymentFrequencyType.id}}"></select>&nbsp;
                                <span ng-show="formData.repaymentFrequencyType == 2">{{'label.heading.on' | translate}}</span>
                                <select id="repaymentFrequencyNthDayType" class="form-control"
                                        ng-disabled="disableFrequencySelect"
                                        ng-model="formData.repaymentFrequencyNthDayType"
                                        ng-change="loandetails.repaymentFrequencyNthDayValue = formValue(loanaccountinfo.repaymentFrequencyNthDayTypeOptions,formData.repaymentFrequencyNthDayType)"
                                        ng-options="repaymentFrequencyNthDayType.id as repaymentFrequencyNthDayType.code | translate for repaymentFrequencyNthDayType in loanaccountinfo.repaymentFrequencyNthDayTypeOptions"
                                        ng-show="formData.repaymentFrequencyType == 2"
                                        value="{{repaymentFrequencyNthDayType.id}}">
                                    <option value="">{{'label.selecton' | translate}}</option>
                                </select>&nbsp;
                                <select id="repaymentFrequencyDayOfWeekType" class="form-control"
                                        ng-disabled="disableDaySelect"
                                        ng-model="formData.repaymentFrequencyDayOfWeekType"
                                        ng-change="loandetails.repaymentFrequencyDayOfWeekValue = formValue(loanaccountinfo.repaymentFrequencyDaysOfWeekTypeOptions,formData.repaymentFrequencyDayOfWeekType)"
                                        ng-options="repaymentFrequencyDayOfWeekType.id as repaymentFrequencyDayOfWeekType.code | translate for repaymentFrequencyDayOfWeekType in loanaccountinfo.repaymentFrequencyDaysOfWeekTypeOptions"
                                        ng-show="formData.repaymentFrequencyType == 2"
                                        value="{{repaymentFrequencyDayOfWeekType.id}}">
                                    <option value="">{{'label.selectday' | translate}}</option>
                                </select>&nbsp;

                                <form-validate valattributeform="Terms" valattribute="repaidevery"/>
                            </td>

                        </tr>
                        <tr>
                            <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.repaymentsStartingFromDate == true">
                                <label>{{ 'label.input.firstrepaymenton' | translate }}</label>
                                <i class="fa fa-question-circle"
                                   uib-tooltip="{{'label.tooltip.firstrepaymenton' | translate}}"></i>
                            </td>
                            <td class="paddedbottom20"
                                ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.repaymentsStartingFromDate == true">
                                <input id="repaymentsStartingFromDate" type="text" datepicker-pop="dd MMMM yyyy"
                                       ng-model="date.fourth" is-open="opened3" ng-disabled="disableDaySelect"
                                       min="minDate" class="form-control"/>
                            </td>
                            <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.interestChargedFromDate == true">
                                <label class="control-label">{{ 'label.input.interestchargedfrom' | translate }}:
                                </label>
                                <i class="fa fa-question-circle"
                                   uib-tooltip="{{'label.tooltip.interestchargedfrom' | translate}}"></i>
                            </td>
                            <td class="paddedbottom20"
                                ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.interestChargedFromDate == true">
                                <input id="interestChargedFromDate" type="text" datepicker-pop="dd MMMM yyyy"
                                       ng-model="date.third" is-open="opened2" min="minDate"
                                       class="form-control"/>
                            </td>
                        </tr>
                        <tr ng-show="!loanaccountinfo.isLoanProductLinkedToFloatingRate">
                            <td>
                                <label>{{ 'label.input.nominalinterestrate' | translate }}&nbsp;
                                    <span class="required">*</span>
                                </label>
                            </td>
                            <td class="paddedbottom20">
                                <input id="interestRatePerPeriod" class="form-control" type="text"
                                       name="nominalinterestrate" ng-model="formData.interestRatePerPeriod"
                                       ng-disabled="ratesEnabled&&rateFlag"
                                />&nbsp;&nbsp;{{loanaccountinfo.interestRateFrequencyType.code | translate}}
                            </td>
                            <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.interestType == true">
                                <label>{{ 'label.input.interestmethod' | translate }}</label>
                            </td>
                            <td class="paddedbottom20"
                                ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.interestType == true">
                                <div class="width170px">
                                    <select id="interestType" ng-model="formData.interestType"
                                            ng-disabled="!loanaccountinfo.product.allowAttributeOverrides.interestType"
                                            ng-change="loandetails.interestValue = formValue(loanaccountinfo.interestTypeOptions,formData.interestType)"
                                            ng-options="interestType.id as interestType.code | translate for interestType in loanaccountinfo.interestTypeOptions"
                                            class="form-control width170px" value="{{interestType.id}}"></select>
                                    <label class="col-sm-offset-1">{{ 'label.input.isequalamortization' | translate
                                        }}</label>
                                    <input type="checkbox" ng-model="formData.isEqualAmortization" ng-true-value="true"
                                           ng-false-value="false">
                                </div>
                            </td>
                        </tr>

                        <tr ng-show="loanaccountinfo.isLoanProductLinkedToFloatingRate">
                            <td>
                                <label>{{ 'label.heading.floatinginterestratedifferential' | translate }}&nbsp;
                                    <span class="required">*</span>
                                </label>
                            </td>
                            <td class="paddedbottom20">
                                <input id="interestratedifferential" class="form-control" type="text"
                                       name="interestratedifferential" ng-model="formData.interestRateDifferential"
                                />
                            </td>
                            <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.interestType == true">
                                <label>{{ 'label.input.interestmethod' | translate }}</label>
                            </td>
                            <td class="width36 paddedbottom20"
                                ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.interestType == true">
                                <select id="interestType1" ng-model="formData.interestType"
                                        ng-disabled="!loanaccountinfo.product.allowAttributeOverrides.interestType"
                                        ng-options="interestType.id as interestType.code | translate for interestType in loanaccountinfo.interestTypeOptions"
                                        class="form-control width170px" value="{{interestType.id}}"/>
                                <label>{{ 'label.input.isfloatingrate' | translate}}</label>
                                <input id="isfloatingrate" class="input-mini-small" type="checkbox"
                                       ng-model="formData.isFloatingInterestRate"/>
                            </td>
                        </tr>

                        <tr>
                            <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.amortizationType == true">
                                <label>{{ 'label.input.amortization' | translate }}&nbsp;
                                    <span class="required">*</span>:</label>
                            </td>
                            <td class="paddedbottom20"
                                ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.amortizationType == true">
                                <select id="amortizationType" ng-model="formData.amortizationType"
                                        class="form-control width170px"
                                        ng-change="loandetails.amortizationValue = formValue(loanaccountinfo.amortizationTypeOptions,formData.amortizationType)"
                                        ng-options="amortizationType.id as amortizationType.code | translate for amortizationType in loanaccountinfo.amortizationTypeOptions"
                                        value="{{amortizationType.id}}"
                                        ng-disabled="!loanaccountinfo.product.allowAttributeOverrides.amortizationType"></select>
                            </td>
                            <td class="form-group" ng-show="formData.amortizationType == 0">
                                <label class="control-label">{{ 'label.input.fixed.pricipal.percentage.per.installment' | translate
                                    }}
                                    <i class="fa fa-question-circle"
                                       uib-tooltip="{{'label.tooltip.fixed.pricipal.percentage.per.installment' | translate}}"
                                       tooltip-append-to-body="true"></i>
                                </label>
                            </td>
                            <td>
                                <input id="fixedPrincipalPercentagePerInstallment" type="text"
                                       name="fixedPrincipalPercentagePerInstallment" class="form-control"
                                       ng-model="formData.fixedPrincipalPercentagePerInstallment" late-validate number>
                            </td>
                        </tr>
                        <tr>
                            <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.interestCalculationPeriodType == true">
                                <label>{{ 'label.input.interestcalculationperiod' | translate }}&nbsp;
                                    <span class="required">*</span>
                                </label>
                            </td>
                            <td class="paddedbottom20"
                                ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.interestCalculationPeriodType == true">
                                <select id="interestCalculationPeriodType"
                                        ng-model="formData.interestCalculationPeriodType"
                                        ng-change="loandetails.interestCalculationPeriodValue = formValue(loanaccountinfo.interestCalculationPeriodTypeOptions,formData.interestCalculationPeriodType)"
                                        ng-options="interestCalculationPeriodType.id as interestCalculationPeriodType.code | translate for interestCalculationPeriodType in loanaccountinfo.interestCalculationPeriodTypeOptions"
                                        class="form-control width170px" value="{{interestCalculationPeriodType.id}}"
                                        ng-disabled="!loanaccountinfo.product.allowAttributeOverrides.interestCalculationPeriodType"></select>
                            </td>
                            <td colspan="2"
                                ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.interestCalculationPeriodType == true || formData.interestCalculationPeriodType == 0">
                                <label>{{ 'label.input.allowpartialperiodinterestcalcualtion' | translate
                                    }}&nbsp;</label>
                                <label class="checkbox control-label">
                                    <input id="allowPartialPeriodInterestCalcualtion" type="checkbox"
                                           ng-model="formData.allowPartialPeriodInterestCalcualtion"
                                           ng-disabled="!loanaccountinfo.product.allowAttributeOverrides.interestCalculationPeriodType">
                                </label>
                            </td>

                        </tr>
                        <tr>
                            <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.inArrearsTolerance == true">
                                <label>{{ 'label.input.arearstolerance' | translate }}</label>
                            </td>
                            <td class="paddedbottom20"
                                ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.inArrearsTolerance == true">
                                <input id="inArrearsTolerance" type="text"
                                       ng-disabled="!loanaccountinfo.product.allowAttributeOverrides.inArrearsTolerance"
                                       ng-model="formData.inArrearsTolerance" class="form-control" number-format ng-pattern="/^(?!,$)[\d,.]+$/"/>&nbsp;{{loanaccountinfo.currency.displaySymbol}}
                            </td>
                            <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.graceOnInterestCharged == true">
                                <label>{{ 'label.input.interestfreeperiod' | translate }}</label>
                            </td>
                            <td class="paddedbottom20"
                                ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.graceOnInterestCharged == true">
                                <input id="graceOnInterestCharged" type="text"
                                       ng-model="formData.graceOnInterestCharged" class="form-control"/>
                            </td>
                        </tr>
                        <tr>
                            <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.transactionProcessingStrategyId == true">
                                <label>{{ 'label.input.repaymentstrategy' | translate }}&nbsp;
                                    <span class="required">*</span>
                                </label>
                            </td>
                            <td class="paddedbottom20"
                                ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.transactionProcessingStrategyId == true">
                                <select id="transactionProcessingStrategyId"
                                        ng-model="formData.transactionProcessingStrategyId"
                                        ng-change="loandetails.transactionProcessingStrategyValue = formValue(loanaccountinfo.transactionProcessingStrategyOptions,formData.transactionProcessingStrategyId,'id','name')"
                                        ng-options="transactionProcessingStrategy.id as transactionProcessingStrategy.code | translate for transactionProcessingStrategy in loanaccountinfo.transactionProcessingStrategyOptions"
                                        value="{{transactionProcessingStrategy.id}}"
                                        ng-disabled="!loanaccountinfo.product.allowAttributeOverrides.transactionProcessingStrategyId"
                                        class="form-control width170px"></select>
                            </td>
                            <td colspan=2>
                                <lable>{{'label.input.grace' | translate }}:</lable>
                                <i class="fa fa-question-circle"
                                   uib-tooltip="{{'label.tooltip.moratorium' | translate}}"></i>
                                <label>{{'label.input.onprincipalpayment' | translate}}</label>
                                <input id="graceOnPrincipalPayment" type="text" class="input-mini-medium"
                                       ng-disabled="!loanaccountinfo.product.allowAttributeOverrides.graceOnPrincipalAndInterestPayment"
                                       ng-model="formData.graceOnPrincipalPayment">
                                <label ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.graceOnInterestPayment == true">{{'label.input.oninterestpayment' | translate}}</label>
                                <input ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.graceOnInterestPayment == true"
                                       id="graceOnInterestPayment"
                                       type="text" class="input-mini-medium"
                                       ng-disabled="!loanaccountinfo.product.allowAttributeOverrides.graceOnPrincipalAndInterestPayment"
                                       ng-model="formData.graceOnInterestPayment">
                                <label ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.graceOnArrearsAgeing == true">{{'label.input.onduedate' | translate}}</label>
                                <input ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.graceOnArrearsAgeing == true"
                                       id="graceOnArrearsAgeing"
                                       type="text" class="input-mini-medium"
                                       ng-disabled="!loanaccountinfo.product.allowAttributeOverrides.graceOnArrearsAgeing"
                                       ng-model="formData.graceOnArrearsAgeing">
                            </td>
                        </tr>
                        <tr data-ng-show="loanaccountinfo.canDefineInstallmentAmount">
                            <td colspan=2>
                                <label>{{ 'label.input.fixedemiamount' | translate }}:</label>&nbsp;
                                <input id="fixedEmiAmount" type="text" ng-model="formData.fixedEmiAmount"
                                       class="form-control" number-format ng-pattern="/^(?!,$)[\d,.]+$/"/>&nbsp;

                            </td>
                        </tr>
                        <tr ng-show="loanaccountinfo.canUseForTopup">
                            <td>
                                <label>{{ 'label.heading.isTopup' | translate }}</label>
                            </td>
                            <td class="paddedbottom20">
                                <input type="checkbox" name="isTopup" ng-model="formData.isTopup"/>
                            </td>
                            <td ng-show="formData.isTopup == true">
                                <label>{{ 'label.input.loanIdToClose' | translate }}
                                </label>
                            </td>
                            <td class="width36 paddedbottom20" ng-show="formData.isTopup == true">
                                <select id="loanIdToClose" ng-model="formData.loanIdToClose"
                                        ng-change="loandetails.loanAccountToClose= formValue(loanaccountinfo.clientActiveLoanOptions,formData.loanIdToClose,'id','accountNo')"
                                        ng-options="loanSummary.id as loanSummary.accountNo for loanSummary in loanaccountinfo.clientActiveLoanOptions"
                                        class="form-control width170px" value="{{loanSummary.id}}"></select>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="4"
                                ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                                <hr>
                            </td>
                        </tr>
                        <tr ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                            <td>
                                <label class="control-label">{{ 'label.input.recalculateinterest' | translate }}</label>
                            </td>
                            <td class="paddedbottom20">
                                <label class="control-label">{{ loanaccountinfo.isInterestRecalculationEnabled | YesOrNo}}</label>
                            </td>
                            <td>
                                <label>{{ 'label.input.daysinyears' | translate }}</label>
                                <i class="fa fa-question-circle" uib-tooltip="{{'label.tooltip.days' | translate}}"></i>
                            </td>
                            <td class="paddedbottom20">
                                <label>{{ loanaccountinfo.daysInYearType.code | translate}}</label>
                            </td>
                        </tr>
                        <tr data-ng-show="loanaccountinfo.isInterestRecalculationEnabled">
                            <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                                <label>{{ 'label.input.interest.recalculation.reschdule.strategy' | translate }}</label>
                            </td>
                            <td class="paddedbottom20"
                                ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                                <label>{{ loanaccountinfo.interestRecalculationData.rescheduleStrategyType.code | translate}}
                                </label>
                            </td>
                            <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                                <label>{{ 'label.input.daysinmonth' | translate }}</label>
                                <i class="fa fa-question-circle" uib-tooltip="{{'label.tooltip.days' | translate}}"></i>
                            </td>
                            <td class="paddedbottom20"
                                ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                                <label>{{ loanaccountinfo.daysInMonthType.code | translate }}</label>
                            </td>
                        </tr>
                        <tr data-ng-show="loanaccountinfo.isInterestRecalculationEnabled">
                            <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                                <label class="control-label">{{ 'label.input.interest.recalculation.compounding.method' | translate
                                    }}</label>
                            </td>
                            <td class="paddedbottom20"
                                ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                                <label>{{ loanaccountinfo.interestRecalculationData.interestRecalculationCompoundingType.value}}
                                </label>
                            </td>

                            <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                                <label class="control-label">{{ 'label.input.frequency.for.recalculte.outstanding.principal' | translate
                                    }}
                                    <span class="required">*</span>
                                </label>
                            </td>
                            <td class="paddedbottom20"
                                ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                                <label>{{ loanaccountinfo.interestRecalculationData.recalculationRestFrequencyType.value}}
                                </label>
                                <label data-ng-show="loanaccountinfo.interestRecalculationData.recalculationRestFrequencyType.id == 3 &&
                                            loanaccountinfo.interestRecalculationData.recalculationRestFrequencyWeekday != null">
                                    {{label.heading.on}}
                                    {{ loanaccountinfo.interestRecalculationData.recalculationRestFrequencyWeekday.value}}
                                </label>
                                <label data-ng-show="loanaccountinfo.interestRecalculationData.recalculationRestFrequencyType.id == 4 &&
                                            loanaccountinfo.interestRecalculationData.recalculationRestFrequencyOnDay != null">on
                                    day {{ loanaccountinfo.interestRecalculationData.recalculationRestFrequencyOnDay}}
                                </label>
                                <label data-ng-show="loanaccountinfo.interestRecalculationData.recalculationRestFrequencyType.id == 4 &&
                                            loanaccountinfo.interestRecalculationData.recalculationRestFrequencyOnDay == null &&
                                            loanaccountinfo.interestRecalculationData.recalculationRestFrequencyNthDay != null">on
                                    {{ loanaccountinfo.interestRecalculationData.recalculationRestFrequencyNthDay.value}}
                                    {{ loanaccountinfo.interestRecalculationData.recalculationRestFrequencyWeekday.value}}
                                </label>
                            </td>
                        </tr>
                        <tr data-ng-show="loanaccountinfo.isInterestRecalculationEnabled && loanaccountinfo.interestRecalculationData.recalculationRestFrequencyType.id != 1">
                            <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                                <label class="control-label">{{ 'label.input.frequenc.interval.for.recalculte.outstanding.principal' | translate
                                    }}
                                </label>
                            </td>
                            <td class="paddedbottom20"
                                ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                                <label>{{ loanaccountinfo.interestRecalculationData.recalculationRestFrequencyInterval}}
                                </label>
                            </td>
                        </tr>
                        <tr data-ng-show="loanaccountinfo.isInterestRecalculationEnabled  && loanaccountinfo.interestRecalculationData.interestRecalculationCompoundingType.id != 0">
                            <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                                <label class="control-label">{{ 'label.input.frequency.for.compounding' | translate }}
                                    <span class="required">*</span>
                                </label>
                            </td>
                            <td class="paddedbottom20"
                                ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                                <label>{{ loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyType.value}}
                                </label>
                                <label data-ng-show="loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyType.id == 3 &&
                                            loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyWeekday != null">
                                    on
                                    {{ loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyWeekday.value}}
                                </label>
                                <label data-ng-show="loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyType.id == 4 &&
                                            loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyOnDay != null">on
                                    day
                                    {{ loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyOnDay}}
                                </label>
                                <label data-ng-show="loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyType.id == 4 &&
                                            loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyOnDay == null &&
                                            loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyNthDay != null">on
                                    {{ loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyNthDay.value}}
                                    {{ loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyWeekday.value}}
                                </label>
                            </td>
                        </tr>
                        <tr data-ng-show="loanaccountinfo.isInterestRecalculationEnabled && loanaccountinfo.interestRecalculationData.interestRecalculationCompoundingType.id != 0 && loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyType.id != 1">
                            <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                                <label class="control-label">{{ 'label.input.frequenc.interval.for.compounding' | translate
                                    }}</label>
                            </td>
                            <td class="paddedbottom20"
                                ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                                <label>{{ loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyInterval}}
                                </label>
                            </td>
                        </tr>

                    </table>


                    <div ng-show="loanaccountinfo" ng-hide="previewRepayment">
                        <div ng-show="multiDisburseLoan">
                            <hr/>
                            <label>
                                <strong>{{ 'label.heading.tranchedetails' | translate }}</strong>
                            </label>
                            <table class=" width100">
                                <tr>
                                    <td class="width14">
                                        <label>{{'label.input.outstandingloanbalance' | translate}}:
                                        </label>
                                    </td>
                                    <td class="width36 paddedbottom20">
                                        <input id="maxOutstandingLoanBalance" type="text"
                                               ng-model="formData.maxOutstandingLoanBalance" class="form-control"
                                               number-format ng-pattern="/^(?!,$)[\d,.]+$/"/>&nbsp;
                                        <a title="{{ 'label.button.addtranch' | translate }}" ng-click="addTranches()">
                                            <i class="fa fa-plus "></i>
                                        </a>
                                    </td>
                                </tr>
                            </table>
                            <table class=" width100" ng-show="formData.disbursementData.length>0">
                                <thead>
                                <tr class="graybg">
                                    <th>{{'label.input.expecteddisbursementon' | translate}}</th>
                                    <th>{{'label.input.principal' | translate}}</th>
                                    <th>&nbsp;</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="disbursementDetail in formData.disbursementData">
                                    <td>
                                        <input id="disbursementDetail[{{$index}}].expectedDisbursementDate" type="text"
                                               datepicker-pop="dd MMMM yyyy"
                                               placeholder="{{'label.input.expecteddisbursementon' | translate}}"
                                               ng-model="disbursementDetail.expectedDisbursementDate"
                                               is-open="'openedtranche'+$index"
                                               min="minDate" class="form-control"/>
                                    </td>
                                    <td>
                                        <input id="{{disbursementDetail[$index].principal}}"
                                               class="input-sm form-control" number-format ng-pattern="/^(?!,$)[\d,.]+$/" type="text"
                                               ng-model="disbursementDetail.principal"
                                               placeholder="{{'label.input.principal' | translate}}">
                                    </td>
                                    <td>
                                        <a ng-click="deleteTranches($index)">
                                            <i class="fa fa-times-circle fa-2x"></i>
                                        </a>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>

                        <!--Rate Module-->
                        <div ng-show="ratesEnabled">
                            <hr/>
                            <h3>{{ 'label.heading.rates' | translate }}</h3>
                            <hr>
                            <div class="form-group">
                                <div class="col-md-12">
                                    <select id="currentRate" ng-model="currentRate" class="form-control"
                                            ng-options="rate as rate.name for rate in rateOptions"
                                            value="{{rate}}">
                                        <option class="displaynone" value="">{{'label.selectrate' | translate}}</option>
                                    </select>

                                    <button type="button" class="btn btn-primary"
                                            ng-click="rateSelected(currentRate)">{{ 'label.button.add' | translate }}
                                    </button>
                                </div>
                            </div>
                            <div class="form-group col-md-12">
                                <table class="table width100">
                                    <tr class="graybg">
                                        <th>{{'label.heading.name' | translate}}</th>
                                        <th>{{'label.heading.percentage' | translate}}</th>
                                        <th></th>
                                        <th>{{'label.heading.actions' | translate}}</th>

                                    </tr>
                                    <tr ng-repeat="rate in formData.rates">
                                        <td>{{rate.name}}</td>
                                        <td>{{rate.percentage | number}}</td>
                                        <td></td>
                                        <td><a ng-click="deleteRate($index)"><i class="fa fa-times icon-white"></i></a>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                            <!-- End -->
                        </div>
                    </div>
                    <hr>
                    <button class="btn btn-default pull-left" wz-previous>
                        <i class="fa fa-arrow-left"></i>&nbsp;&nbsp;Previous
                    </button>
                    <button class="btn btn-default pull-right" type="submit">Next&nbsp;&nbsp;
                        <i class="fa fa-arrow-right"></i>
                    </button>
                </fieldset>
            </form>
        </wz-step>
        <wz-step wz-title="{{ 'label.heading.charges' | translate }}" wz-disabled="{{disabled}}">
            <form name="Charges" ng-submit="goNext(Charges)" class="form-horizontal">
                <fieldset>
                    <api-validate></api-validate>
                    <!--<h3>{{'label.heading.charges' | translate}}</h3>-->
                    <hr>
                    <div ng-show="loanaccountinfo" ng-hide="previewRepayment">
                        <div class="form-group">
                            <div class="col-sm-3">
                                <select ng-model="chargeFormData.chargeId"
                                        ng-options="charge.id as (charge.name + ',' + charge.currency.displaySymbol) for charge in loanaccountinfo.chargeOptions|filter:loanaccountinfo.currency.code:strict"
                                        value="{{charge.id}}" class="form-control width170px">
                                    <option value="">{{'label.selectcharge' | translate}}</option>
                                </select>
                            </div>
                            <div class="col-sm-1">
                                <a class="btn btn-primary" ng-click="addCharge()">
                                    <i class="fa fa-plus "></i>&nbsp;Add</a>
                            </div>
                        </div>
                        <table class="table width100" ng-show="charges.length>0">
                            <tr class="graybg">
                                <th>{{'label.heading.name' | translate}}</th>
                                <th>{{'label.heading.type' | translate}}</th>
                                <th>{{'label.heading.amount' | translate}}</th>
                                <th>{{'label.heading.collectedon' | translate}}</th>
                                <th>{{'label.heading.date' | translate}}</th>
                                <th>{{'label.heading.actions' | translate}}</th>
                            </tr>
                            <tr ng-repeat="charge in charges">
                                <td>{{charge.name}},{{charge.currency.displaySymbol}}</td>
                                <td>{{charge.chargeCalculationType.value}}</td>
                                <td>
                                    <input id="{{charges[$index].amount}}" class="form-control" type="text"
                                           ng-model="charge.amount" placeholder="{{'label.input.amount' | translate}}"
                                           number-format ng-pattern="/^(?!,$)[\d,.]+$/">
                                </td>
                                <td>{{charge.chargeTimeType.value}}</td>
                                <td>
                                    <input id="charges[{{$index}}].duedate" type="text" datepicker-pop="dd MMMM yyyy"
                                           class="form-control" placeholder="{{'label.input.duedate' | translate}}"
                                           ng-model="charge.dueDate" is-open="'openedch'+$index" min="minDate"
                                    />
                                </td>
                                <td>
                                    <a ng-click="deleteCharge($index)">
                                        <i class="fa fa-times-circle fa-2x"></i>
                                    </a>
                                </td>
                            </tr>
                        </table>
                        <div ng-show="loanaccountinfo.overdueCharges.length>0">
                            <label>
                                <strong>{{ 'label.heading.overduepenalitycharge' | translate }}</strong>
                            </label>
                            <table class="width100">
                                <tr class="graybg">
                                    <th>{{'label.heading.name' | translate}}</th>
                                    <th>{{'label.heading.type' | translate}}</th>
                                    <th>{{'label.heading.amount' | translate}}</th>
                                    <th>{{'label.heading.collectedon' | translate}}</th>
                                </tr>
                                <tr ng-repeat="charge in loanaccountinfo.overdueCharges">
                                    <td>{{charge.name}},{{charge.currency.displaySymbol}}</td>
                                    <td>{{charge.chargeCalculationType.value}}</td>
                                    <td>{{charge.amount | number}}</td>
                                    <td>{{charge.chargeTimeType.value}}</td>
                                </tr>
                            </table>
                        </div>
                        <br>
                        <div class="form-group">
                            <label class="control-label col-sm-1">
                                <strong>{{ 'label.heading.collaterals' | translate }}</strong>
                            </label>
                            <select ng-model="collateralFormData.collateralId"
                                    ng-options="collateral.collateralId as collateral.name for collateral in collateralsData"
                                    value="{{collateral.collateralId}}" class="form-control width170px col-sm-2">
                            </select>&nbsp;&nbsp;
                            <div class="col-sm-2">
                                <input class="form-control" type="text" ng-model="collateralFormData.quantity"
                                       placeholder="{{'label.input.quantity' | translate}}"
                                       number-format ng-pattern="/^(?!,$)[\d,.]+$/" ng-change="updateValues()">
                            </div>
                            <div class="col-sm-2">
                                <input class="form-control" type="text" ng-model="collateralFormData.total"
                                       number-format ng-pattern="/^(?!,$)[\d,.]+$/" readonly>
                            </div>
                            <div class="col-sm-2">
                                <input class="form-control" type="text" ng-model="collateralFormData.totalCollateral"
                                       number-format ng-pattern="/^(?!,$)[\d,.]+$/" readonly>
                            </div>
                            <div class="col-sm-1">
                                <a class="btn btn-primary" ng-click="addCollateral()" class="col-sm-1">&nbsp;
                                    <i class="fa fa-plus "></i>&nbsp;Add</a>
                            </div>
                        </div>
                        <br>
                        <div>
                            <table class="" class="width100" ng-show="collaterals.length>0">
                                <tr class="graybg">
                                    <th>{{'label.heading.id' | translate}}</th>
                                    <th>{{'label.heading.quantity' | translate}}</th>
                                    <th>{{'label.heading.totalValue' | translate}}</th>
                                    <th>{{'label.heading.totalCollateralValue' | translate}}</th>
                                </tr>
                                <tr ng-repeat="collateral in collaterals">
                                    <td>
                                        <input type="text" class="input-sm form-control"
                                               ng-model="collateral.collateralId" readonly>
                                    </td>
                                    <td>
                                        <input id="{{collaterals[$index].quantity}}" type="text" class="form-control"
                                               ng-model="collateral.quantity" readonly>
                                    </td>
                                    <td>
                                        <input id="total" type="text" class="form-control" ng-model="collateral.total">
                                    </td>
                                    <td>
                                        <input id="totalCollateral" type="text" class="form-control"
                                               ng-model="collateral.totalCollateral">
                                    </td>
                                    <td>
                                        <a ng-click="deleteCollateral($index)">
                                            <i class="fa fa-times-circle fa-2x"></i>
                                        </a>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <br>


                    <div ng-show="loanaccountinfo">
                        <span>
                            <a ng-hide="previewRepayment"
                               ng-click="previewRepayments()">{{'label.anchor.repaymentinfo' | translate}}
                                <i class="fa fa-arrow-circle-right"></i>
                            </a>
                        </span>
                        <span>
                            <a ng-show="previewRepayment" ng-click="previewRepayment=!previewRepayment">
                                <i class="fa fa-circle-arrow-left">{{'label.anchor.backtoloaninfo' | translate}}</i>
                            </a>
                            <br>
                            <br>
                        </span>
                    </div>

                    <div>
                        <table class=" width100" ng-show="previewRepayment">
                            <thead>
                            <th colspan="3" scope="col"></th>
                            <th colspan="3" scope="col">{{'label.heading.loanamountandbalance' | translate}}</th>
                            <th colspan="2" scope="col">{{'label.heading.totalcostofloan' | translate}}</th>
                            <th colspan="2" scope="col"></th>
                            </thead>
                            <tbody>
                            <tr>
                                <td>#</td>
                                <td>{{'label.heading.date' | translate}}</td>
                                <td>{{'label.heading.days' | translate}}</td>
                                <td>{{'label.heading.disbursement' | translate}}</td>
                                <td>{{'label.heading.principaldue' | translate}}</td>
                                <td>{{'label.heading.principalbalance' | translate}}</td>
                                <td>{{'label.heading.interestdue' | translate}}</td>
                                <td>{{'label.heading.fees' | translate}}</td>
                                <td>{{'label.heading.penalty' | translate}}</td>
                                <td>{{'label.heading.due' | translate}}</td>
                            </tr>
                            <tr ng-repeat="period in repaymentscheduleinfo.periods">
                                <td>{{period.period}}</td>
                                <td>{{period.dueDate | DateFormat}}</td>
                                <td>{{period.daysInPeriod}}</td>
                                <td>{{period.principalDisbursed | number}}</td>
                                <td>{{period.principalDue | number}}</td>
                                <td>{{period.principalLoanBalanceOutstanding | number}}</td>
                                <td>{{period.interestDue | number}}</td>
                                <td>{{period.feeChargesDue | number}}</td>
                                <td>{{period.penaltyChargesDue | number}}</td>
                                <td>{{period.totalDueForPeriod | number}}</td>
                            </tr>
                            <tfoot class="ui-widget-header">
                            <tr>
                                <td colspan="2">{{'label.heading.total' | translate}}</td>
                                <td>{{repaymentscheduleinfo.loanTermInDays}}</td>
                                <td>{{repaymentscheduleinfo.totalPrincipalDisbursed | number}}</td>
                                <td>{{repaymentscheduleinfo.totalPrincipalExpected | number}}</td>
                                <td></td>
                                <td>{{repaymentscheduleinfo.totalInterestCharged | number}}</td>
                                <td>{{repaymentscheduleinfo.totalFeeChargesCharged | number}}</td>
                                <td>{{repaymentscheduleinfo.totalPenaltyChargesCharged | number}}</td>
                                <td>{{repaymentscheduleinfo.totalRepaymentExpected | number}}</td>
                            </tr>
                            </tfoot>
                            </tbody>
                        </table>
                    </div>
                    <br>
                    <hr>
                    <button class="btn btn-default pull-left" wz-previous>
                        <i class="fa fa-arrow-left"></i>&nbsp;&nbsp;Previous
                    </button>
                    <button class="btn btn-default pull-right" type="submit">Next&nbsp;&nbsp;
                        <i class="fa fa-arrow-right"></i>
                    </button>
                </fieldset>
            </form>
        </wz-step>

        <wz-step wz-title="{{ 'label.heading.documents' | translate }}">
            <form name="LoanDocuments" class="form-horizontal" ng-submit="goNext(LoanDocuments)">
                <fieldset>
                    <h3>{{'label.heading.uploaddocuments' | translate}}</h3>
                    <hr>
                    <api-validate></api-validate>
                    <form name="loandocs" class="form-horizontal">
                        <fieldset>

                            <table class="table table-striped" ng-if="loanDocuments && loanDocuments.length>0">
                                <thead>
                                <th>No.</th>
                                <th>{{'label.input.name' | translate}}</th>
                                <th>{{'label.input.description' | translate}}</th>
                                <th>{{'label.input.actions' | translate}}</th>
                                </thead>
                                <tbody>
                                <tr ng-repeat="loanDoc in loanDocuments">
                                    <td>{{countIndex($index)}}</td>
                                    <td>{{loanDoc.name}}</td>
                                    <td>{{loanDoc.description}}</td>
                                    <td><i class="fa fa-times-circle-o" title="Remove" ng-click="removeDoc($index)"></i></td>
                                </tr>
                                </tbody>

                            </table>

                            <div class="form-group">
                                <label class="control-label col-sm-2" for="name">{{'label.input.name' | translate}}<span
                                        class="required">*</span></label>

                                <div class="col-sm-3">
                                    <input id="name" type="text" name="name" ng-model="currentLoanDocs.name"
                                           class="form-control" late-Validate/>
                                </div>
                                <div class="col-sm-3">
                                    <form-validate valattributeform="loandocumentform" valattribute="name"/>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-2" for="name">{{'label.input.document.type' | translate}}<span
                                        class="required">*</span></label>

                                <div class="col-sm-3">
                                    <select id="doctype" ng-model="currentLoanDocs.documentType"
                                            ng-options="documenttype.id as documenttype.name for documenttype in documentTypeOptions"
                                            value="{{documenttype.id}}"
                                            class="form-control">
                                        <option style="display:none" value="">{{'label.menu.selectone' | translate}}
                                    </select>
                                </div>
                                <div class="col-sm-3">
                                    <form-validate valattributeform="loandocumentform" valattribute="name"/>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-2"
                                       for="description">{{'label.input.description' | translate}}</label>

                                <div class="col-sm-3">
                                <textarea rows="2" id="description" ng-model="currentLoanDocs.description"
                                          class="form-control"></textarea>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-2"
                                       for="file">{{'label.input.selectfile' | translate}}<span
                                        class="required">*</span></label>

                                <div class="col-sm-3">
                                    <input id="file" type="file" ngf-select="onFileSelect($files)">
                                </div>
                            </div>

                            <div class="col-md-offset-3">
                                <button ng-disabled="!currentLoanDocs.name || !currentLoanDocs.file|| !currentLoanDocs.documentType"
                                        ng-click="addLoanDocuments()"
                                        class="btn btn-primary"><i
                                        class="fa fa-plus-circle"></i> {{'label.button.add' | translate}}
                                </button>
                            </div>
                        </fieldset>
                    </form>

                    <button class="btn btn-default pull-left" wz-previous>
                        <i class="fa fa-arrow-left"></i>&nbsp;&nbsp;Previous
                    </button>
                    <button class="btn btn-default pull-right" type="submit">Next&nbsp;&nbsp;
                        <i class="fa fa-arrow-right"></i>
                    </button>
                </fieldset>
            </form>
        </wz-step>

        <wz-step wz-title="{{ 'label.heading.additionals' | translate }}"
                 wz-disabled="{{prequalificationType !== 'INDIVIDUAL'}}">
            <form name="Additionals" ng-submit="goNext(Additionals)" class="form-horizontal">
                <fieldset>
                    <api-validate></api-validate>
                    <br>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-horizontal">
                                <div class="pull-left">
                                    <div class="form-group">
                                        <div class="col-sm-6">
                                            <div class="input-group" style="width: 400px">
                                                <input data-ng-model="searchText" type="text"
                                                       placeholder="{{'label.input.searchbycaseid' | translate}}"
                                                       class="form-control unstyled"/>
                                                <span class="input-group-btn">
                                            <button type="button" ng-click="searchByCaseId()"
                                                    class="btn btn-primary form-control" ng-disabled="!searchText">
                                                <span class="fa fa-search"></span>
                                            </button>
                                        </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div ng-show="loanaccountinfo" ng-hide="previewRepayment">
                        <table class="table-bordered table view-table table-striped" ng-show="loanaccountinfo"
                               ng-hide="previewRepayment">
                            <thead>
                            <tr class="graybg">
                                <th>{{'label.heading.additional.property.name' | translate}}</th>
                                <th>{{'label.heading.additional.property.value' | translate}}</th>
                                <th>{{'label.heading.description' | translate}}</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="(propertyName, propertyValue) in formData.loanAdditionalData">
                                <td class="paddedbottom10">{{propertyName}}</td>
                                <td class="paddedbottom10">
                                    <div ng-if="isAdditionalDateProperty(propertyName)">
                                        <input id="{{propertyName}}" type="text" datepicker-pop="dd MMMM yyyy"
                                               class="form-control" min="minDate"
                                               ng-model="formData.loanAdditionalData[propertyName]" is-open="opened3"
                                        />
                                    </div>
                                    <div ng-if="isDecimalProperty(propertyName)">
                                        <input id="{{propertyName}}" class="form-control" type="text"
                                               name="{{propertyName}}" number-format ng-pattern="/^(?!,$)[\d,.]+$/"
                                               ng-model="formData.loanAdditionalData[propertyName]" is-open="opened3"/>
                                    </div>

                                    <div ng-if="!isAdditionalDateProperty(propertyName) && !isDecimalProperty(propertyName)">
                                            <input id="{{propertyName}}" class="form-control" type="text"
                                               name="{{propertyName}}"
                                               ng-model="formData.loanAdditionalData[propertyName]" is-open="opened3"/>
                                    </div>
                                </td>
                                <td class="paddedbottom10">
                                    {{ 'label.description.additional.' + propertyName | translate}}
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <hr>
                    <button class="btn btn-default pull-left" wz-previous>
                        <i class="fa fa-arrow-left"></i>&nbsp;&nbsp;Previous
                    </button>
                    <button class="btn btn-default pull-right" type="submit">Next&nbsp;&nbsp;
                        <i class="fa fa-arrow-right"></i>
                    </button>
                </fieldset>
            </form>
        </wz-step>

        <wz-step wz-title="{{ 'label.heading.additionals' | translate }}" wz-disabled="{{disabled}}"
                 ng-if="product.ownerTypeOption.value ==='Group'">
            <form name="Additionals" ng-submit="goNext(Additionals)" class="form-horizontal">
                <fieldset>
                    <api-validate></api-validate>
                    <!--<h3>{{'label.heading.charges' | translate}}</h3>-->
                    <hr>
                    <div ng-show="loanaccountinfo" ng-hide="previewRepayment">
                        <div class="solidborder" style="padding: 20px">
                            <h3>{{'label.heading.general' | translate}}</h3>
                            <hr/>

                            <table ng-show="loanaccountinfo" ng-hide="previewRepayment" class=" width100">
                                <tr>
                                    <td class="width14">
                                        <label>{{ 'label.numofloancycles' | translate }}&nbsp;
                                            <span class="required">*</span>:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">
                                        <select ng-model="formData.loanCycleCompleted" id="loanCycleCompleted" required
                                                ng-options="cycle.id as cycle.description for cycle in loanCycleCompletedOptions"
                                                value="{{cycle.id}}" class="form-control">
                                        </select>
                                        <form-validate valattributeform="Additionals" valattribute="loanCycles"/>
                                    </td>
                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.earlyCancellationReason' | translate
                                            }}</label>
                                    </td>
                                    <td class="width19 paddedbottom20">
                                        <select ng-model="formData.earlyCancellationReason" id="earlyCancellationReason"
                                                ng-options="reason.id as reason.description for reason in cancellationReasonOptions"
                                                value="{{reason.id}}" class="form-control">
                                            <option value="">{{'label.selectone' | translate}}</option>
                                        </select>
                                        <form-validate valattributeform="Additionals"
                                                       valattribute="earlyCancellationReason"/>
                                    </td>
                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.sourceOfFunds' | translate }}&nbsp;
                                            <span class="required">*</span>:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">
                                        <select ng-model="formData.sourceOfFunds" id="sourceOfFunds" required
                                                ng-options="fund.id as fund.description for fund in sourceOfFundsOptions"
                                                value="{{fund.id}}" class="form-control">
                                            <option value="">{{'label.selectone' | translate}}</option>
                                        </select>

                                        <span ng-show="Additionals.sourceOfFunds.$invalid && Additionals.sourceOfFunds.$dirty">
                                            <small class="required">
                                                {{'label.mustbenumeric' | translate}}
                                            </small>
                                        </span>
                                        <form-validate valattributeform="Additionals" valattribute="sourceOfFunds"/>
                                    </td>
                                </tr>

                                <tr>
                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.requreddate' | translate }}</label>
                                    </td>
                                    <td class="width19 paddedbottom20">

                                        <input id="dateRequested" sort type="text" name="dateRequested"
                                               datepicker-pop="dd MMMM yyyy" ng-model="date.fifth"
                                               is-open="opened1" min="minDate" class="form-control" required/>

                                        <form-validate valattributeform="Additionals" valattribute="dateRequested"/>
                                    </td>
                                    <td class="width14">
                                        <label>{{ 'label.input.groupPosition' | translate }}&nbsp;
                                            <span class="required">*</span>:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">
                                        <select ng-model="formData.position" id="position" required
                                                ng-options="position.id as position.description for position in groupPositionOptions"
                                                value="{{position.id}}" class="form-control">
                                            <option value="">{{'label.selectone' | translate}}</option>
                                        </select>
                                        <form-validate valattributeform="Additionals" valattribute="position"/>
                                    </td>

                                </tr>
                                <tr>
                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.facilitator' | translate }}&nbsp;
                                            <span class="required">*</span>:</label>
                                    </td>
                                    <td class="width19 paddedbottom20" colspan="2">
                                        <select id="facilitator" ng-model="formData.facilitator" required
                                                ng-options="responsibleUser.id as  responsibleUser.firstname + ' ' +
                                                responsibleUser.lastname + ' (' + responsibleUser.username + ')'
                                                 for responsibleUser in facilitatorOptions | orderBy:'username':reverse"
                                                class="form-control width170px" value="{{responsibleUser.id}}">
                                            <option value="">{{'label.selectone' | translate}}</option>
                                        </select>
                                        <form-validate valattributeform="Additionals" valattribute="facilitator"/>
                                    </td>
                                </tr>
                            </table>
                        </div>

                        <div class="solidborder" style="padding: 20px">
                            <h3>{{'label.heading.basic' | translate}}</h3>
                            <hr/>

                            <table ng-show="loanaccountinfo" ng-hide="previewRepayment" class=" width100">
                                <tr>
                                    <td class="width14">
                                        <label>{{ 'label.input.fullname' | translate }}&nbsp;:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">
                                        <input type="text" class="form-control" id="fullName" name="fullName"
                                               ng-model="formData.fullName"
                                               late-Validate/>
                                        <form-validate valattributeform="Additionals" valattribute="fullName"/>
                                    </td>
                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.dateofbirth' | translate
                                            }}</label>
                                    </td>
                                    <td class="width19 paddedbottom20">
                                        <input id="dateOfBirth" sort type="text" name="dateOfBirth"
                                               datepicker-pop="dd MMMM yyyy" ng-model="date.sixth"
                                               is-open="opened1" min="minDate" class="form-control"/>

                                        <form-validate valattributeform="Additionals"
                                                       valattribute="dateOfBirth"/>
                                    </td>
                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.maidenname' | translate }}&nbsp;
                                            :</label>
                                    </td>
                                    <td class="width19 paddedbottom20">
                                        <input type="text" class="form-control" id="maidenName" name="maidenName"
                                               ng-model="formData.maidenName"
                                               late-Validate/>
                                        <form-validate valattributeform="Additionals" valattribute="maidenName"/>
                                    </td>
                                </tr>

                                <tr>
                                    <td class="width14">
                                        <label>{{ 'label.input.maritalstatus' | translate }}&nbsp;:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">
                                        <select ng-model="formData.maritalStatus" id="maritalStatus"
                                                ng-options="status.id as status.description for status in maritalStatusOptions"
                                                value="{{status.id}}" class="form-control">
                                            <option value="">{{'label.selectone' | translate}}</option>
                                        </select>
                                        <form-validate valattributeform="Additionals"
                                                       valattribute="maritalStatus"/>
                                    </td>
                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.education' | translate }}</label>
                                    </td>
                                    <td class="width19 paddedbottom20">

                                        <select ng-model="formData.educationLevel" id="educationLevel"
                                                ng-options="level.id as level.description for level in educationLevelOptions"
                                                value="{{level.id}}" class="form-control">
                                            <option value="">{{'label.selectone' | translate}}</option>
                                        </select>

                                        <form-validate valattributeform="Additionals" valattribute="educationLevel"/>
                                    </td>
                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.schoolingYears' | translate
                                            }}&nbsp;:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">
                                        <input type="text" class="form-control" id="schoolingYears"
                                               name="schoolingYears" number-format ng-pattern="/^(?!,$)[\d,.]+$/"
                                               ng-model="formData.schoolingYears"
                                               late-Validate/>
                                        <form-validate valattributeform="Additionals" valattribute="schoolingYears"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="width14">
                                        <label>{{ 'label.input.nationality' | translate }}&nbsp;</label>
                                    </td>
                                    <td class="width19 paddedbottom20">
                                        <input type="text" class="form-control" id="nationality" name="nationality"
                                               ng-model="formData.nationality"
                                               late-Validate/>
                                        <form-validate valattributeform="Additionals" valattribute="nationality"/>
                                    </td>

                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.language' | translate }}&nbsp;</label>
                                    </td>
                                    <td class="width19 paddedbottom20">
                                        <input type="text" class="form-control" id="language" name="language"
                                               ng-model="formData.language"
                                               late-Validate/>
                                        <form-validate valattributeform="Additionals" valattribute="language"/>
                                    </td>

                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.noOfChildren' | translate }}&nbsp;</label>
                                    </td>
                                    <td class="width19 paddedbottom20">
                                        <input type="text" class="form-control" id="noOfChildren" name="noOfChildren"
                                               ng-model="formData.noOfChildren" number-format ng-pattern="/^(?!,$)[\d,.]+$/"
                                               late-Validate/>
                                        <form-validate valattributeform="Additionals" valattribute="noOfChildren"/>
                                    </td>
                                </tr>

                                <tr>
                                    <td class="width14">
                                        <label>{{ 'label.input.dpi' | translate }}&nbsp;</label>
                                    </td>
                                    <td class="width19 paddedbottom20">
                                        <input type="text" class="form-control" id="dpi" name="dpi"
                                               ng-model="formData.dpi"
                                               late-Validate/>
                                        <form-validate valattributeform="Additionals" valattribute="dpi"/>
                                    </td>

                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.nit' | translate }}&nbsp;</label>
                                    </td>
                                    <td class="width19 paddedbottom20">
                                        <input type="text" class="form-control" id="nit" name="nit"
                                               ng-model="formData.nit"
                                               late-Validate/>
                                        <form-validate valattributeform="Additionals" valattribute="nit"/>
                                    </td>

                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.jobtype' | translate }}&nbsp;&nbsp;
                                            <span class="required">*</span>:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">
                                        <select ng-model="formData.jobType" id="jobType" required
                                                ng-options="jobtype.id as jobtype.description for jobtype in jobTypeOptions"
                                                value="{{jobtype.id}}" class="form-control">
                                            <option value="">{{'label.selectone' | translate}}</option>
                                        </select>
                                        <form-validate valattributeform="Additionals" valattribute="jobType"/>
                                    </td>
                                </tr>


                                <tr>
                                    <td class="width14">
                                        <label>{{ 'label.input.occupancyClassification' | translate }}&nbsp; <span class="required">*</span></label>
                                    </td>
                                    <td class="width19 paddedbottom20">

                                        <select ng-model="formData.occupancyClassification" id="occupancyClassification" required
                                                ng-options="classification.id as classification.name for classification in economicSectorOptions"
                                                value="{{classification.id}}" class="form-control">
                                            <option value="">{{'label.selectone' | translate}}</option>
                                        </select>
                                        <form-validate valattributeform="Additionals"
                                                       valattribute="occupancyClassification"/>
                                    </td>

                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.actsOwnBehalf' | translate }}&nbsp;</label>
                                    </td>
                                    <td class="width19 paddedbottom20">
                                        <select ng-model="formData.actsOwnBehalf" id="actsOwnBehalf"
                                                ng-options="yesno.name as yesno.description for yesno in yesnoOptions"
                                                value="{{yesno.name}}" class="form-control">
                                            <option value="">{{'label.selectone' | translate}}</option>
                                        </select>
                                        <form-validate valattributeform="Additionals" valattribute="actsOwnBehalf"/>
                                    </td>

                                    <td class="width14" ng-if="formData.actsOwnBehalf ==='NO'">
                                        <label class="ml-2">{{ 'label.input.onBehalfOf' | translate
                                            }}&nbsp;&nbsp;:</label>
                                    </td>
                                    <td class="width19 paddedbottom20" ng-if="formData.actsOwnBehalf ==='NO'">
                                        <input type="text" class="form-control" id="onBehalfOf" name="onBehalfOf"
                                               ng-model="formData.onBehalfOf"
                                               late-Validate/>
                                        <form-validate valattributeform="Additionals" valattribute="onBehalfOf"/>
                                    </td>
                                </tr>

                                <tr>
                                    <td class="width14">
                                        <label>{{ 'label.input.politicallyExposed' | translate }}&nbsp;</label>
                                    </td>
                                    <td class="width19 paddedbottom20">

                                        <select ng-model="formData.politicallyExposed" id="politicallyExposed"
                                                ng-options="yesno.name as yesno.description for yesno in yesnoOptions"
                                                value="{{yesno.name}}" class="form-control">
                                            <option value="">{{'label.selectone' | translate}}</option>
                                        </select>
                                        <form-validate valattributeform="Additionals"
                                                       valattribute="politicallyExposed"/>
                                    </td>

                                    <td class="width14" ng-if="formData.politicallyExposed ==='YES'">
                                        <label class="ml-2">{{ 'label.input.politicalPosition' | translate
                                            }}&nbsp;</label>
                                    </td>
                                    <td class="width19 paddedbottom20" ng-if="formData.politicallyExposed ==='YES'">

                                        <input type="text" class="form-control" id="politicalPosition"
                                               name="politicalPosition"
                                               ng-model="formData.politicalPosition"
                                               late-Validate/>

                                        <form-validate valattributeform="Additionals" valattribute="politicalPosition"/>
                                    </td>

                                    <td class="width14" ng-if="formData.politicallyExposed ==='YES'">
                                        <label class="ml-2">{{ 'label.input.politicalOffice' | translate
                                            }}&nbsp;&nbsp;:</label>
                                    </td>
                                    <td class="width19 paddedbottom20" ng-if="formData.politicallyExposed ==='YES'">
                                        <input type="text" class="form-control" id="politicalOffice"
                                               name="politicalOffice"
                                               ng-model="formData.politicalOffice"
                                               late-Validate/>
                                        <form-validate valattributeform="Additionals" valattribute="politicalOffice"/>
                                    </td>
                                </tr>
                            </table>
                        </div>

                        <div class="solidborder" style="padding: 20px">
                            <h3>{{'label.heading.contact.information' | translate}}</h3>
                            <hr/>

                            <table ng-show="loanaccountinfo" ng-hide="previewRepayment" class=" width100">
                                <tr>
                                    <td class="width14">
                                        <label>{{ 'label.input.client.housingtype' | translate }}&nbsp;
                                            <span class="required">*</span>:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">
                                        <select ng-model="formData.housingType" id="housingType" required
                                                ng-options="housingType.id as housingType.description for housingType in housingTypeOptions"
                                                value="{{status.id}}" class="form-control">
                                            <option value="">{{'label.selectone' | translate}}</option>
                                        </select>
                                        <form-validate valattributeform="Additionals" valattribute="housingType"/>
                                    </td>
                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.rentFee' | translate
                                            }}&nbsp;<span class="required">*</span>:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">
                                        <input type="text" class="form-control" id="rentFee"
                                               name="rentFee" number-format ng-pattern="/^(?!,$)[\d,.]+$/"
                                               ng-model="formData.rentFee" required
                                               late-Validate/>
                                        <form-validate valattributeform="Additionals"
                                                       valattribute="rentFee"/>
                                    </td>
                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.mortgageFee' | translate
                                            }}&nbsp;<span class="required">*</span>:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">
                                        <input type="text" class="form-control" id="mortgageFee"
                                               name="mortgageFee" number-format ng-pattern="/^(?!,$)[\d,.]+$/"
                                               ng-model="formData.mortgageFee" required
                                               late-Validate/>
                                        <form-validate valattributeform="Additionals"
                                                       valattribute="mortgageFee"/>
                                    </td>

                                </tr>

                                <tr>
                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.address' | translate }}&nbsp;</label>
                                    </td>
                                    <td class="width19 paddedbottom20">
                                        <input type="text" class="form-control" id="address" name="address"
                                               ng-model="formData.address"
                                               late-Validate/>
                                        <form-validate valattributeform="Additionals" valattribute="address"/>
                                    </td>
                                    <td class="width14">
                                        <label>{{ 'label.input.populatedPlace' | translate }}&nbsp;:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">
                                        <input type="text" class="form-control" id="populatedPlace"
                                               name="populatedPlace"
                                               ng-model="formData.populatedPlace"
                                               late-Validate/>
                                        <form-validate valattributeform="Additionals"
                                                       valattribute="populatedPlace"/>
                                    </td>
                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.referencePoint' | translate }}</label>
                                    </td>
                                    <td class="width19 paddedbottom20">
                                        <input type="text" class="form-control" id="referencePoint"
                                               name="referencePoint"
                                               ng-model="formData.referencePoint"
                                               late-Validate/>
                                        <form-validate valattributeform="Additionals" valattribute="referencePoint"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.mobilenumber' | translate }}&nbsp;
                                            <span class="required">*</span>:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">
                                        <input type="text" class="form-control" id="phoneNumber" name="phoneNumber"
                                               ng-model="formData.phoneNumber" required
                                               late-Validate/>
                                        <form-validate valattributeform="Additionals" valattribute="phoneNumber"/>
                                    </td>
                                    <td class="width14">
                                        <label>{{ 'label.input.relativeNumber' | translate }}&nbsp;
                                            <span class="required">*</span>: </label>
                                    </td>
                                    <td class="width19 paddedbottom20">
                                        <input type="text" class="form-control" id="relativeNumber"
                                               name="relativeNumber"
                                               ng-model="formData.relativeNumber" required
                                               late-Validate/>
                                        <form-validate valattributeform="Additionals" valattribute="relativeNumber"/>
                                    </td>

                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.communityYears' | translate }}&nbsp;
                                            <span class="required">*</span>:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">
                                        <input type="text" class="form-control" id="yearsInCommunity"
                                               name="yearsInCommunity" number-format ng-pattern="/^(?!,$)[\d,.]+$/"
                                               ng-model="formData.yearsInCommunity" required
                                               late-Validate/>
                                        <form-validate valattributeform="Additionals" valattribute="yearsInCommunity"/>
                                    </td>
                                </tr>
                            </table>
                        </div>


                        <div class="solidborder" style="padding: 20px">
                            <h3>{{'label.heading.financialData' | translate}}</h3>
                            <hr/>

                            <table ng-show="loanaccountinfo" ng-hide="previewRepayment" class=" width100">
                                <tr>
                                    <td class="width14">
                                        <label>{{ 'label.input.monthlyIncome' | translate }}&nbsp;
                                            <span class="required">*</span>:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">
                                        <input type="text" class="form-control" id="monthlyIncome"
                                               name="monthlyIncome" number-format ng-pattern="/^(?!,$)[\d,.]+$/"
                                               ng-model="formData.monthlyIncome" required
                                               late-Validate/>
                                        <form-validate valattributeform="Additionals" valattribute="monthlyIncome"/>
                                    </td>
                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.otherIncome' | translate
                                            }}&nbsp;:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">
                                        <input type="text" class="form-control" id="otherIncome" name="otherIncome"
                                               ng-model="formData.otherIncome" number-format ng-pattern="/^(?!,$)[\d,.]+$/"
                                               late-Validate/>
                                        <form-validate valattributeform="Additionals"
                                                       valattribute="otherIncome"/>
                                    </td>
                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.familyExpenses' | translate }}&nbsp;
                                            <span class="required">*</span></label>
                                    </td>
                                    <td class="width19 paddedbottom20">
                                        <input type="text" class="form-control" id="familyExpenses"
                                               name="familyExpenses" number-format ng-pattern="/^(?!,$)[\d,.]+$/"
                                               ng-model="formData.familyExpenses" required
                                               late-Validate/>
                                        <form-validate valattributeform="Additionals" valattribute="familyExpenses"/>
                                    </td>
                                </tr>

                                <tr>
                                    <td class="width14">
                                        <label>{{ 'label.input.currentLoans' | translate }}&nbsp;:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">
                                        <select ng-model="formData.currentLoans" id="currentLoans"
                                                ng-options="yesno.name as yesno.description for yesno in yesnoOptions"

                                                value="{{yesno.name}}" class="form-control">
                                            <option value="">{{'label.selectone' | translate}}</option>
                                        </select>
                                        <form-validate valattributeform="Additionals"
                                                       valattribute="currentLoans"/>
                                    </td>

                                </tr>

                                <tr ng-if="formData.currentLoans ==='YES'">
                                    <td colspan="6">
                                        <div class="alert alert-info">
                                            <h4>{{'label.heading.currentLoanDetails' | translate}}</h4>
                                            <hr/>
                                            <div ng-if="currentLoans && currentLoans.length>0">
                                                <table class="table table-striped">
                                                    <thead>
                                                    <th>No.</th>
                                                    <th>{{'label.input.institutionName' | translate}}</th>
                                                    <th>{{'label.input.totalLoanBalance' | translate}}</th>
                                                    <th>{{'label.heading.charges' | translate}}</th>
                                                    <th>{{'label.input.totalLoanAmount' | translate}}</th>
                                                    <th>{{'label.input.adhoc.search.loanstatus' | translate}}</th>
                                                    <th>{{'label.input.actions' | translate}}</th>
                                                    </thead>
                                                    <tbody>
                                                    <tr ng-repeat="loanData in currentLoans">
                                                        <td>{{countIndex($index)}}</td>
                                                        <td>{{loanData.institutionName}}</td>
                                                        <td>{{loanData.totalLoanBalance}}</td>
                                                        <td>{{loanData.charges}}</td>
                                                        <td>{{loanData.totalLoanAmount}}</td>
                                                        <td>{{loanData.loanStatus}}</td>
                                                        <td><i class="fa fa-times-circle-o" title="Remove"
                                                               ng-click="removeLoan($index)"></i></td>
                                                    </tr>
                                                    </tbody>

                                                </table>
                                                <hr/>
                                            </div>
                                            <form name="currentLoans" class="form-horizontal">
                                                <table>
                                                    <tr>
                                                        <td class="width14">
                                                            <label class="ml-2">{{ 'label.input.institutionName' | translate
                                                                }}&nbsp;
                                                                <span class="required">*</span></label>
                                                        </td>
                                                        <td class="width19 paddedbottom20">
                                                            <input type="text" class="form-control" id="institutionName"
                                                                   name="institutionName"
                                                                   ng-model="currentLoanData.institutionName"
                                                                   late-Validate/>
                                                            <form-validate valattributeform="currentLoans"
                                                                           valattribute="institutionName"/>
                                                        </td>
                                                        <td class="width14">
                                                            <label class="ml-2">{{ 'label.input.institutionType' | translate
                                                                }}&nbsp;
                                                                <span class="required">*</span></label>
                                                        </td>
                                                        <td class="width19 paddedbottom20">
                                                            <select ng-model="currentLoanData.institutionType"
                                                                    id="institutionType"
                                                                    ng-options="type.id as type.description for type in institutionTypeOptions"
                                                                    value="{{type.id}}" class="form-control">
                                                                <option value="">{{'label.selectone' | translate}}
                                                                </option>
                                                            </select>
                                                            <form-validate valattributeform="currentLoans"
                                                                           valattribute="institutionType"/>
                                                        </td>
                                                        <td class="width14">
                                                            <label class="ml-2">{{ 'label.heading.balance' | translate
                                                                }}&nbsp;
                                                                <span class="required">*</span></label>
                                                        </td>
                                                        <td class="width19 paddedbottom20">
                                                            <input type="text" class="form-control" number-format ng-pattern="/^(?!,$)[\d,.]+$/"
                                                                   id="totalLoanBalance" name="totalLoanBalance"
                                                                   ng-model="currentLoanData.totalLoanBalance"
                                                                   late-Validate/>
                                                            <form-validate valattributeform="currentLoans"
                                                                           valattribute="totalLoanBalance"/>
                                                        </td>
                                                    </tr>

                                                    <tr>
                                                        <td class="width14">
                                                            <label class="ml-2">{{ 'label.heading.feevalue' | translate
                                                                }}&nbsp;</label>
                                                        </td>
                                                        <td class="width19 paddedbottom20">
                                                            <input type="text" class="form-control" id="charges"
                                                                   name="charges" number-format ng-pattern="/^(?!,$)[\d,.]+$/"
                                                                   ng-model="currentLoanData.charges"
                                                                   late-Validate/>
                                                            <form-validate valattributeform="currentLoans"
                                                                           valattribute="charges"/>
                                                        </td>
                                                        <td class="width14">
                                                            <label class="ml-2">{{ 'label.input.loanAmountValue' | translate
                                                                }}&nbsp;
                                                                <span class="required">*</span></label>
                                                        </td>
                                                        <td class="width19 paddedbottom20">
                                                            <input type="text" class="form-control" number-format ng-pattern="/^(?!,$)[\d,.]+$/"
                                                                   id="totalLoanAmount" name="totalLoanAmount"
                                                                   ng-model="currentLoanData.totalLoanAmount"
                                                                   late-Validate/>
                                                            <form-validate valattributeform="currentLoans"
                                                                           valattribute="totalLoanAmount"/>
                                                        </td>
                                                        <td class="width14">
                                                            <label class="ml-2">{{ 'label.input.adhoc.search.debtstatus' | translate
                                                                }}&nbsp;
                                                                <span class="required">*</span></label>
                                                        </td>
                                                        <td class="width19 paddedbottom20">
                                                            <select ng-model="currentLoanData.loanStatus"
                                                                    id="loanStatus"
                                                                    ng-options="status.id as status.description for status in loanStatusOptions"
                                                                    value="{{type.id}}" class="form-control">
                                                                <option value="">{{'label.selectone' | translate}}
                                                                </option>
                                                            </select>
                                                            <form-validate valattributeform="currentLoans"
                                                                           valattribute="loanStatus"/>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td colspan="6" class="text-center">
                                                            <button ng-disabled="!currentLoanData.institutionName || !currentLoanData.institutionType
                                                            || !currentLoanData.totalLoanAmount|| !currentLoanData.loanStatus"
                                                                    ng-click="addCurrentLoansDetails()"
                                                                    class="btn btn-primary"><i
                                                                    class="fa fa-plus-circle"></i> Add
                                                            </button>
                                                        </td>
                                                    </tr>

                                                </table>
                                            </form>
                                            <table class="table">
                                                <tr>
                                                    <td class="width14">
                                                        <label class="ml-2">{{ 'label.input.totalBalances' | translate
                                                            }}&nbsp;
                                                            <span class="required">*</span></label>
                                                    </td>
                                                    <td class="width19 paddedbottom20">
                                                        <input type="text" class="form-control"
                                                               id="totalExternalLoanAmount" number-format ng-pattern="/^(?!,$)[\d,.]+$/"
                                                               name="totalExternalLoanAmount" disabled
                                                               ng-model="formData.totalExternalLoanAmount"
                                                               late-Validate/>
                                                        <form-validate valattributeform="Additionals"
                                                                       valattribute="totalExternalLoanAmount"/>
                                                    </td>
                                                    <td class="width14">
                                                        <label class="ml-2">{{ 'label.input.totalInstallments' | translate }}&nbsp;
                                                            <span class="required">*</span></label>
                                                    </td>
                                                    <td class="width19 paddedbottom20">
                                                        <input type="text" class="form-control" id="totalInstallments"
                                                               name="totalInstallments" disabled number-format ng-pattern="/^(?!,$)[\d,.]+$/"
                                                               ng-model="formData.totalInstallments"
                                                               late-Validate/>
                                                        <form-validate valattributeform="Additionals"
                                                                       valattribute="totalInstallments"/>
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                    </td>
                                </tr>

                                <tr>
                                    <td class="width14">
                                        <label>{{ 'label.input.clienttype' | translate }}&nbsp; <span
                                                class="required">*</span>:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">
                                        <select ng-model="formData.clientType" id="clientType" required
                                                ng-options="clientType.id as clientType.description for clientType in clientTypeOptions"
                                                value="{{clientType.id}}" class="form-control">
                                            <option value="">{{'label.selectone' | translate}}</option>
                                        </select>
                                        <form-validate valattributeform="Additionals" valattribute="clientType"/>
                                    </td>

                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.houseHoldGoods' | translate
                                            }}&nbsp;:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">

                                        <input type="text" class="form-control" id="houseHoldGoods"
                                               name="houseHoldGoods"
                                               ng-model="formData.houseHoldGoods"
                                               late-Validate/>
                                        <form-validate valattributeform="Additionals" valattribute="houseHoldGoods"/>
                                    </td>

                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.businessActivity' | translate
                                            }}&nbsp;:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">

                                        <input type="text" class="form-control" id="businessActivities"
                                               name="businessActivities"
                                               ng-model="formData.businessActivities"
                                               late-Validate/>
                                        <form-validate valattributeform="Additionals" valattribute="businessActivities"/>
                                    </td>

                                </tr>


                                <tr>
                                    <td class="width14">
                                        <label>{{ 'label.input.businessLocation' | translate }}&nbsp;:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">
                                        <select ng-model="formData.businessLocation" id="businessLocation"
                                                ng-options="location.id as location.description for location in businessLocationOptions"
                                                value="{{location.id}}" class="form-control">
                                            <option value="">{{'label.selectone' | translate}}</option>
                                        </select>
                                        <form-validate valattributeform="Additionals" valattribute="businessLocation"/>
                                    </td>

                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.businessExperience' | translate
                                            }}&nbsp;<span class="required">*</span>:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">
                                        <select ng-model="formData.businessExperience" id="businessExperience" required
                                                ng-options="experience.id as experience.description for experience in businessExperienceOptions"
                                                value="{{experience.id}}" class="form-control">
                                            <option value="">{{'label.selectone' | translate}}</option>
                                        </select>
                                        <form-validate valattributeform="Additionals"
                                                       valattribute="businessExperience"/>
                                    </td>

                                </tr>


                                <tr>
                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.salesValue' | translate }}&nbsp;<span
                                                class="required">*</span>:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">

                                        <input type="text" class="form-control" id="salesValue"
                                               name="salesValue" required number-format ng-pattern="/^(?!,$)[\d,.]+$/"
                                               ng-model="formData.salesValue"
                                               late-Validate/>
                                        <form-validate valattributeform="Additionals" valattribute="salesValue"/>
                                    </td>

                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.businessPurchases' | translate }}&nbsp;<span
                                                class="required">*</span>:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">

                                        <input type="text" class="form-control" id="businessPurchases"
                                               name="businessPurchases" required number-format ng-pattern="/^(?!,$)[\d,.]+$/"
                                               ng-model="formData.businessPurchases"
                                               late-Validate/>
                                        <form-validate valattributeform="Additionals" valattribute="businessPurchases"/>
                                    </td>

                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.businessProfit' | translate
                                            }}&nbsp;:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">

                                        <input type="text" class="form-control" id="businessProfit"
                                               name="businessProfit" disabled number-format ng-pattern="/^(?!,$)[\d,.]+$/"
                                               ng-model="formData.businessProfit"
                                               late-Validate/>
                                        <form-validate valattributeform="Additionals" valattribute="businessProfit"/>
                                    </td>
                                </tr>


                                <tr>
                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.clientProfit' | translate }}&nbsp;<span
                                                class="required">*</span>:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">

                                        <input type="text" class="form-control" id="clientProfit"
                                               name="clientProfit" required number-format ng-pattern="/^(?!,$)[\d,.]+$/"
                                               ng-model="formData.clientProfit"
                                               late-Validate/>
                                        <form-validate valattributeform="Additionals" valattribute="clientProfit"/>
                                    </td>

                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.inventories' | translate }}&nbsp;<span
                                                class="required">*</span>:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">

                                        <input type="text" class="form-control" id="inventories"
                                               name="inventories" required number-format ng-pattern="/^(?!,$)[\d,.]+$/"
                                               ng-model="formData.inventories"
                                               late-Validate/>
                                        <form-validate valattributeform="Additionals" valattribute="inventories"/>
                                    </td>

                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.visitBusiness' | translate }}&nbsp;<span
                                                class="required">*</span>:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">
                                        <select ng-model="formData.visitBusiness" id="visitBusiness" required
                                                ng-options="yesno.id as yesno.description for yesno in yesnoOptions"
                                                value="{{yesno.id}}" class="form-control">
                                            <option value="">{{'label.selectone' | translate}}</option>
                                        </select>
                                        <form-validate valattributeform="Additionals" valattribute="visitBusiness"/>
                                    </td>

                                </tr>
                                <tr>
                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.familySupport' | translate }}&nbsp;<span
                                                class="required">*</span>:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">
                                        <select ng-model="formData.familySupport" id="familySupport" required
                                                ng-options="yesno.id as yesno.description for yesno in yesnoOptions"
                                                value="{{yesno.id}}" class="form-control">
                                            <option value="">{{'label.selectone' | translate}}</option>
                                        </select>
                                        <form-validate valattributeform="Additionals" valattribute="familySupport"/>
                                    </td>

                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.businessEvolution' | translate }}&nbsp;<span
                                                class="required">*</span>:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">
                                        <select ng-model="formData.businessEvolution" id="businessEvolution" required
                                                ng-options="evolution.id as evolution.description for evolution in businessEvolutionOptions"
                                                value="{{evolution.id}}" class="form-control">
                                            <option value="">{{'label.selectone' | translate}}</option>
                                        </select>
                                        <form-validate valattributeform="Additionals" valattribute="businessEvolution"/>
                                    </td>

                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.numberOfApprovals' | translate }}&nbsp;<span
                                                class="required">*</span>:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">

                                        <input type="text" class="form-control" id="numberOfApprovals"
                                               name="numberOfApprovals" required number-format ng-pattern="/^(?!,$)[\d,.]+$/"
                                               ng-model="formData.numberOfApprovals"
                                               late-Validate/>
                                        <form-validate valattributeform="Additionals" valattribute="numberOfApprovals"/>
                                    </td>

                                </tr>

                                <tr>
                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.recommenderName' | translate }}&nbsp;<span
                                                class="required">*</span>:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">

                                        <input type="text" class="form-control" id="recommenderName"
                                               name="recommenderName" required
                                               ng-model="formData.recommenderName"
                                               late-Validate/>
                                        <form-validate valattributeform="Additionals" valattribute="recommenderName"/>
                                    </td>

                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.monthlyPaymentCapacity' | translate }}&nbsp;<span
                                                class="required">*</span>:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">

                                        <input type="text" class="form-control" id="monthlyPaymentCapacity"
                                               name="monthlyPaymentCapacity" required
                                               ng-model="formData.monthlyPaymentCapacity"
                                               late-Validate/>
                                        <form-validate valattributeform="Additionals"
                                                       valattribute="monthlyPaymentCapacity"/>
                                    </td>
                                </tr>
                            </table>
                        </div>

                        <div class="solidborder" style="padding: 20px">
                            <h3>{{'label.heading.creditRequest' | translate}}</h3>
                            <hr/>

                            <table ng-show="loanaccountinfo" ng-hide="previewRepayment" class=" width100">
                                <tr>
                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.loanPurpose' | translate }}&nbsp;<span
                                                class="required">*</span>:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">
                                        <select ng-model="formData.loanPurpose" id="loanPurpose" required
                                                ng-options="loanPurpose.id as loanPurpose.description for loanPurpose in loanPurposeOptions"
                                                value="{{loanPurpose.id}}" class="form-control">
                                            <option value="">{{'label.selectone' | translate}}</option>
                                        </select>
                                        <form-validate valattributeform="Additionals" valattribute="loanPurpose"/>
                                    </td>

                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.currentCreditValue' | translate
                                            }}&nbsp;<span class="required">*</span>:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">

                                        <input type="text" class="form-control" id="currentCreditValue"
                                               name="currentCreditValue" required number-format ng-pattern="/^(?!,$)[\d,.]+$/"
                                               ng-model="formData.currentCreditValue"
                                               late-Validate/>
                                        <form-validate valattributeform="Additionals"
                                                       valattribute="currentCreditValue"/>
                                    </td>

                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.requestedValue' | translate }}&nbsp;<span
                                                class="required">*</span>:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">

                                        <input type="text" class="form-control" id="requestedValue"
                                               name="requestedValue" required number-format ng-pattern="/^(?!,$)[\d,.]+$/"
                                               ng-model="formData.requestedValue"
                                               late-Validate/>
                                        <form-validate valattributeform="Additionals" valattribute="requestedValue"/>
                                    </td>
                                </tr>


                                <tr>
                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.groupAuthorizedValue' | translate
                                            }}&nbsp;<span class="required">*</span>:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">
                                        <input type="text" class="form-control" id="groupAuthorizedValue"
                                               name="groupAuthorizedValue" required number-format ng-pattern="/^(?!,$)[\d,.]+$/"
                                               ng-model="formData.groupAuthorizedValue"
                                               late-Validate/>
                                        <form-validate valattributeform="Additionals"
                                                       valattribute="groupAuthorizedValue"/>
                                    </td>

                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.facilitatorProposedValue' | translate }}&nbsp;<span
                                                class="required">*</span>:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">

                                        <input type="text" class="form-control" id="facilitatorProposedValue"
                                               name="facilitatorProposedValue" required number-format ng-pattern="/^(?!,$)[\d,.]+$/"
                                               ng-model="formData.facilitatorProposedValue"
                                               late-Validate/>
                                        <form-validate valattributeform="Additionals"
                                                       valattribute="facilitatorProposedValue"/>
                                    </td>

                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.proposedFee' | translate }}&nbsp;<span
                                                class="required">*</span>:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">

                                        <input type="text" class="form-control" id="proposedFee"
                                               name="proposedFee" required number-format ng-pattern="/^(?!,$)[\d,.]+$/"
                                               ng-model="formData.proposedFee"
                                               late-Validate/>
                                        <form-validate valattributeform="Additionals" valattribute="proposedFee"/>
                                    </td>
                                </tr>


                                <tr>
                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.agencyAuthorizedAmount' | translate }}&nbsp;<span
                                                class="required">*</span>:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">
                                        <input type="text" class="form-control" id="agencyAuthorizedAmount"
                                               name="agencyAuthorizedAmount" required number-format ng-pattern="/^(?!,$)[\d,.]+$/"
                                               ng-model="formData.agencyAuthorizedAmount"
                                               late-Validate/>
                                        <form-validate valattributeform="Additionals"
                                                       valattribute="agencyAuthorizedAmount"/>
                                    </td>

                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.authorizedFee' | translate }}&nbsp;<span
                                                class="required">*</span>:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">

                                        <input type="text" class="form-control" id="authorizedFee"
                                               name="authorizedFee" required
                                               ng-model="formData.authorizedFee" number-format ng-pattern="/^(?!,$)[\d,.]+$/"
                                               late-Validate/>
                                        <form-validate valattributeform="Additionals" valattribute="authorizedFee"/>
                                    </td>
                                </tr>
                            </table>
                        </div>

                        <div class="solidborder" style="padding: 20px">
                            <h3>{{'label.heading.analysis' | translate}}</h3>
                            <hr/>

                            <table ng-show="loanaccountinfo" ng-hide="previewRepayment" class=" width100">
                                <tr>
                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.totalIncome' | translate }}&nbsp;:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">

                                        <input type="text" class="form-control" id="totalIncome"
                                               name="totalIncome" disabled
                                               ng-model="formData.totalIncome"/>
                                        <form-validate valattributeform="Additionals" valattribute="totalIncome"/>
                                    </td>

                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.totalExpenditures' | translate
                                            }}&nbsp;:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">

                                        <input type="text" class="form-control" id="totalExpenditures"
                                               name="totalExpenditures" disabled
                                               ng-model="formData.totalExpenditures"/>
                                        <form-validate valattributeform="Additionals" valattribute="totalExpenditures"/>
                                    </td>
                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.availableMonthly' | translate
                                            }}&nbsp;:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">

                                        <input type="text" class="form-control" id="availableMonthly"
                                               name="availableMonthly" disabled
                                               ng-model="formData.availableMonthly"/>
                                        <form-validate valattributeform="Additionals" valattribute="availableMonthly"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.paymentCapacity' | translate
                                            }}&nbsp;:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">

                                        <input type="text" class="form-control" id="paymentCapacity"
                                               name="paymentCapacity" disabled
                                               ng-model="formData.paymentCapacity"/>
                                        <form-validate valattributeform="Additionals" valattribute="paymentCapacity"/>
                                    </td>

                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.facValue' | translate }}&nbsp;:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">

                                        <input type="text" class="form-control" id="facValue"
                                               name="facValue" disabled
                                               ng-model="formData.facValue"/>
                                        <form-validate valattributeform="Additionals" valattribute="facValue"/>
                                    </td>

                                    <td class="width14">
                                        <label class="ml-2">{{ 'label.input.debtLevel' | translate }}&nbsp;:</label>
                                    </td>
                                    <td class="width19 paddedbottom20">

                                        <input type="text" class="form-control" id="debtLevel"
                                               name="debtLevel" disabled
                                               ng-model="formData.debtLevel"/>
                                        <form-validate valattributeform="Additionals" valattribute="debtLevel"/>
                                    </td>
                                </tr>
                            </table>
                        </div>

                        <hr>
                        <button class="btn btn-default pull-left" wz-previous>
                            <i class="fa fa-arrow-left"></i>&nbsp;&nbsp;Previous
                        </button>
                        <button class="btn btn-default pull-right" type="submit">Next&nbsp;&nbsp;
                            <i class="fa fa-arrow-right"></i>
                        </button>
                    </div>
                </fieldset>
            </form>
        </wz-step>


        <wz-step icon="fa fa-circle-o" ng-repeat="datatable in datatables" wz-title="{{datatable.registeredTableName}}"
                 id="dynamicSteps"
                 wz-disabled="{{disabled}}">
            <form name="Datatables" class="form-horizontal" ng-submit="submit()">
                <fieldset>
                    <api-validate></api-validate>
                    <!--<h3><strong>{{datatable.registeredTableName}}</strong></h3>-->
                    <hr/>
                    <div class="form-group" ng-repeat="columnHeader in datatable.columnHeaderData">
                        <label class="control-label col-sm-3">{{ columnHeader.columnName | prettifyDataTableColumn }}
                            <span ng-show="!columnHeader.isColumnNullable" class="required">*</span>
                        </label>

                        <div class="col-sm-3">
                            <input ng-show="fieldType(columnHeader.columnDisplayType) == 'TEXT'" type="text"
                                   ng-model="formData.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName]"
                                   class="form-control"/>
                            <input ng-show="fieldType(columnHeader.columnDisplayType) == 'DATE'" type="text"
                                   datepicker-pop="dd MMMM yyyy"
                                   ng-model="formDat.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName]"
                                   is-open="opened{{$index}}" class="form-control"/>
                            <div ng-show="fieldType(columnHeader.columnDisplayType) == 'DATETIME'" class="form-inline">
                                <div class="form-group">
                                    <input type="text" datepicker-pop="dd MMMM yyyy"
                                           ng-model="formDat.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName].date"
                                           is-open="opened{{$index}}" class="form-control"/>
                                </div>
                                <div class="form-group">
                                    <input type="time" placeholder="HH:MM:SS"
                                           ng-model="formDat.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName].time"
                                           class="form-control"/>
                                </div>
                            </div>
                            <div ng-show="fieldType(columnHeader.columnDisplayType) == 'BOOLEAN'">
                                <label class="radio-inline">
                                    <input type="radio"
                                           ng-model="formData.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName]"
                                           value="true"
                                    /> {{'label.input.true' | translate}}
                                </label>
                                <label class="radio-inline">
                                    <input type="radio"
                                           ng-model="formData.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName]"
                                           value="false"
                                    /> {{'label.input.false' | translate}}
                                </label>
                            </div>
                            <span data-ng-switch on="columnHeader.columnDisplayType">
                                <select ng-show="fieldType(columnHeader.columnDisplayType) == 'SELECT'"
                                        data-ng-switch-when="CODELOOKUP"
                                        ng-model="formData.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName]"
                                        ng-options="columnValue.id as columnValue.value for columnValue in columnHeader.columnValues"
                                        value="{{columnValue.id}}" class="form-control">
                                    <option value="">{{'label.selectone' | translate}}</option>
                                </select>
                                <select ng-show="fieldType(columnHeader.columnDisplayType) == 'SELECT'"
                                        data-ng-switch-when="CODEVALUE"
                                        ng-model="formData.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName]"
                                        ng-options="columnValue.value as columnValue.value for columnValue in columnHeader.columnValues"
                                        value="{{columnValue.id}}" class="form-control">
                                    <option value="">{{'label.selectone' | translate}}</option>
                                </select>
                            </span>
                        </div>
                    </div>
                    <!--<div class="col-md-offset-5" ng-if="$last">-->
                    <!--<button id="cancel3" type="reset" class="btn btn-default" ng-click="cancel()">-->
                    <!--{{'label.button.cancel' | translate}}-->
                    <!--</button>-->
                    <!--<button id="save3" type="submit" has-permission='CREATE_LOAN' class="btn btn-primary"-->
                    <!--ng-show="loanaccountinfo">{{'label.button.save' |-->
                    <!--translate}}-->
                    <!--</button>-->
                    <!--</div>-->
                    <hr>
                    <button class="btn btn-default pull-left" wz-previous>
                        <i class="fa fa-arrow-left"></i>&nbsp;&nbsp;Previous
                    </button>
                    <button class="btn btn-default pull-right" type="submit">Next&nbsp;&nbsp;
                        <i class="fa fa-arrow-right"></i>
                    </button>
                </fieldset>
            </form>
        </wz-step>
        <wz-step wz-title="Review" ng-if="!disabled">
            <form name="review" class="form-horizontal">
                <fieldset>
                    <api-validate></api-validate>
                    <!--<h3>Review</h3>-->
                    <table width="100%">
                        <tr class="bottomborder">
                            <td colspan="7">
                                <strong>{{'label.heading.details' | translate}}</strong>
                            </td>
                        </tr>
                        <tr class="toppadding">
                            <td colspan="6">{{'label.input.product' | translate}}</td>
                            <td>{{loandetails.productName}}</td>
                        </tr>
                        <tr>
                            <td colspan="6" ng-show="formData.productId">{{ 'label.input.loanofficer' | translate }}:&nbsp;
                            </td>
                            <td>{{loandetails.loanOfficerName}}</td>
                        </tr>
                        <tr>
                            <td colspan="6">{{ 'label.input.loanpurpose' | translate }}:&nbsp</td>
                            <td>{{loandetails.loanPurposeName}}</td>
                        </tr>
                        <tr>
                            <td colspan="6"
                                ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.fundId == true">
                                {{ 'label.input.fund' | translate }}:
                            </td>
                            <td>{{loandetails.fundName}}</td>
                        </tr>
                        <tr>
                            <td colspan="6">{{ 'label.input.submittedon' | translate }}</td>
                            <td>{{date.first | DateFormat}}</td>
                        </tr>
                        <tr>
                            <td colspan="6">{{ 'label.input.disbursementon' | translate }}</td>&nbsp;
                            <td>{{date.second | DateFormat}}</td>
                        </tr>
                        <tr>
                            <td colspan="6">{{ 'label.input.externalid' | translate }}</td>
                            <td class="">{{loandetails.externalId}}</td>
                        </tr>
                        <tr class="bottomborder toppadding">
                            <td colspan="7">
                                <strong>{{'label.heading.terms' | translate}}</strong>
                            </td>
                        </tr>
                        <tr class="toppadding">
                            <td colspan="6">{{ 'label.input.principal' | translate }}</td>
                            <td>{{loandetails.principal}} {{loanaccountinfo.currency.DisplaySymbol}}</td>
                        </tr>
                        <tr>
                            <td colspan="6">{{ 'label.input.loanterm' | translate }}</td>
                            <td>{{loandetails.loanTermFrequency}} {{loandetails.loanTermFrequencyValue | translate}}</td>
                        </tr>
                        <tr ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.numberOfRepayments">
                            <td colspan="6">
                                {{ 'label.input.numofrepayments' | translate }}&nbsp;
                            </td>
                            <td>{{loandetails.numberOfRepayments}}</td>
                        </tr>
                        <tr ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.repaymentEvery">
                            <td colspan="6">{{ 'label.input.repaidevery' | translate }}</td>
                            <td>{{loandetails.repaymentEvery}} {{loandetails.repaymentFrequencyValue | translate}}
                                {{loandetails.repaymentFrequencyNthDayValue}}
                                {{loandetails.repaymentFrequencyDayOfWeekValue}}
                            </td>
                        </tr>
                        <tr ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.repaymentsStartingFromDate">
                            <td colspan="6">{{ 'label.input.firstrepaymenton' | translate }}</td>
                            <td>{{date.fourth | DateFormat }}</td>
                        </tr>
                        <tr ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.interestChargedFromDate">
                            <td colspan="6">{{ 'label.input.interestchargedfrom' | translate}}
                            <td>{{date.third | DateFormat}}</td>
                        </tr>
                        <tr ng-show="!loanaccountinfo.isLoanProductLinkedToFloatingRate">
                            <td colspan="6">{{ 'label.input.nominalinterestrate' | translate }}</td>
                            <td>
                                {{loandetails.interestRatePerPeriod}}&nbsp;&nbsp;{{loanaccountinfo.interestRateFrequencyType.code | translate}}
                            </td>
                        </tr>
                        <tr ng-show="loanaccountinfo.isLoanProductLinkedToFloatingRate">
                            <td colspan="6">{{ 'label.heading.floatinginterestratedifferential' | translate }}</td>
                            <td>{{formData.interestRateDifferential}}</td>
                        </tr>
                        <tr ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.interestType">
                            <td colspan="6">{{ 'label.input.interestmethod' | translate }}</td>
                            <td>{{loandetails.interestValue | translate}}</td>
                        </tr>
                        <tr ng-show="loanaccountinfo.isLoanProductLinkedToFloatingRate">
                            <td colspan="6">{{ 'label.input.isfloatingrate' | translate}}</td>
                            <td>{{loandetails.isFloatingInterestRate}}</td>
                        </tr>
                        <tr ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.interestType">
                            <td colspan="6">{{ 'label.input.isequalamortization' | translate }}</td>
                            <td>{{loandetails.isEqualAmortization | YesOrNo }}</td>
                        </tr>
                        <tr ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.amortizationType">
                            <td colspan="6">{{ 'label.input.amortization' | translate }}&nbsp;</td>
                            <td>{{loandetails.amortizationValue | translate}}</td>
                        </tr>
                        <tr ng-show="formData.amortizationType == 0">
                            <td colspan="6">{{ 'label.input.fixed.pricipal.percentage.per.installment' | translate }}&nbsp;</td>
                            <td>{{formData.fixedPrincipalPercentagePerInstallment}}</td>
                        </tr>
                        <tr ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.interestCalculationPeriodType">
                            <td colspan="6">{{ 'label.input.interestcalculationperiod' | translate }}&nbsp;</td>
                            <td>{{loandetails.interestCalculationPeriodValue | translate}}</td>
                        </tr>
                        <tr ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.interestCalculationPeriodType || formData.interestCalculationPeriodType == 0">
                            <td colspan="6">{{ 'label.input.allowpartialperiodinterestcalcualtion' | translate
                                }}&nbsp;
                            </td>
                            <td>{{loandetails.allowPartialPeriodInterestCalcualtion}}</td>
                        </tr>
                        <tr ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.inArrearsTolerance">
                            <td colspan="6">{{ 'label.input.arearstolerance' | translate }}</td>
                            <td>{{loandetails.inArrearsTolerance}}&nbsp;{{loanaccountinfo.currency.displaySymbol}}</td>
                        </tr>
                        <tr ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.graceOnInterestCharged">
                            <td colspan="6">{{ 'label.input.interestfreeperiod' | translate }}</td>
                            <td>{{loandetails.graceOnInterestCharged}}</td>
                        </tr>
                        <tr ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.transactionProcessingStrategyId">
                            <td colspan="6">{{ 'label.input.repaymentstrategy' | translate }}&nbsp;</td>
                            <td>{{loandetails.transactionProcessingStrategyValue | translate}}</td>
                        </tr>
                        <tr class="bottomborder toppadding">
                            <td colspan="7">
                                <strong>{{'label.input.grace' | translate }}</strong>
                            </td>
                        </tr>
                        <tr class="toppadding">
                            <td colspan="6">{{'label.input.onprincipalpayment' | translate}}</td>
                            <td>{{formData.graceOnPrincipalPayment}}</td>
                        </tr>
                        <tr ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.graceOnInterestPayment">
                            <td colspan="6">{{'label.input.oninterestpayment' | translate}}</td>
                            <td>{{formData.graceOnInterestPayment}}</td>
                        </tr>
                        <tr ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.graceOnArrearsAgeing">
                            <td colspan="6">{{'label.input.onduedate' | translate}}</td>
                            <td>{{formData.graceOnArrearsAgeing}}</td>
                        </tr>
                        <tr data-ng-show="loanaccountinfo.canDefineInstallmentAmount">
                            <td colspan="6">{{ 'label.input.fixedemiamount' | translate }}:</td>
                            <td>{{formData.fixedEmiAmount}}</td>
                        </tr>
                        <tr ng-show="loanaccountinfo.canUseForTopup">
                            <td colspan="6">{{ 'label.heading.isTopup' | translate }}</td>
                            <td>{{formData.isTopup}}</td>
                        </tr>
                        <tr ng-show="formData.isTopup">
                            <td colspan="6">{{ 'label.input.loanIdToClose' | translate}}</td>
                            <td>{{loandetails.loanAccountToClose}}</td>
                        </tr>
                        <tr ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection">
                            <td colspan="6">{{ 'label.input.recalculateinterest' | translate }}</td>
                            <td>{{ loanaccountinfo.isInterestRecalculationEnabled | YesOrNo}}</td>
                        </tr>
                        <tr ng-show="loanaccountinfo.isInterestRecalculationEnabled">
                            <td colspan="6">{{ 'label.input.daysinyears' | translate }}</td>
                            <td>{{ loanaccountinfo.daysInYearType.code | translate}}</td>
                        </tr>
                        <tr data-ng-show="loanaccountinfo.isInterestRecalculationEnabled">
                            <td colspan="6"
                                ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                                {{ 'label.input.interest.recalculation.reschdule.strategy' | translate }}
                            </td>
                            <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                                {{ loanaccountinfo.interestRecalculationData.rescheduleStrategyType.code | translate}}
                            </td>
                        </tr>
                        <tr ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection">
                            <td colspan="6">{{ 'label.input.daysinmonth' | translate }}</td>
                            <td>{{ loanaccountinfo.daysInMonthType.code | translate }}</td>
                        </tr>
                        <tr data-ng-show="loanaccountinfo.isInterestRecalculationEnabled">
                            <td colspan="6"
                                ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                                {{ 'label.input.interest.recalculation.compounding.method' | translate }}
                            </td>
                            <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                                {{ loanaccountinfo.interestRecalculationData.interestRecalculationCompoundingType.code | translate}}
                            </td>
                        </tr>
                        <tr ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection">
                            <td colspan="6">{{ 'label.input.frequency.for.recalculte.outstanding.principal' | translate
                                }}
                            </td>
                            <td>
                                {{ loanaccountinfo.interestRecalculationData.recalculationRestFrequencyType.value}}</label>
                                <label data-ng-show="loanaccountinfo.interestRecalculationData.recalculationRestFrequencyType.id == 3 &&
                                            loanaccountinfo.interestRecalculationData.recalculationRestFrequencyWeekday != null">
                                    {{'label.heading.on' | translate}}
                                    {{ loanaccountinfo.interestRecalculationData.recalculationRestFrequencyWeekday.value}}
                                </label>
                                <label data-ng-show="loanaccountinfo.interestRecalculationData.recalculationRestFrequencyType.id == 4 &&
                                            loanaccountinfo.interestRecalculationData.recalculationRestFrequencyOnDay != null">on
                                    day {{ loanaccountinfo.interestRecalculationData.recalculationRestFrequencyOnDay}}
                                </label>
                                <label data-ng-show="loanaccountinfo.interestRecalculationData.recalculationRestFrequencyType.id == 4 &&
                                            loanaccountinfo.interestRecalculationData.recalculationRestFrequencyOnDay == null &&
                                            loanaccountinfo.interestRecalculationData.recalculationRestFrequencyNthDay != null">on
                                    {{ loanaccountinfo.interestRecalculationData.recalculationRestFrequencyNthDay.value}}
                                    {{ loanaccountinfo.interestRecalculationData.recalculationRestFrequencyWeekday.value}}
                                </label>
                            </td>
                        </tr>
                        <tr data-ng-show="loanaccountinfo.isInterestRecalculationEnabled && loanaccountinfo.interestRecalculationData.recalculationRestFrequencyType.id != 1">
                            <td colspan="6"
                                ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                                {{ 'label.input.frequenc.interval.for.recalculte.outstanding.principal' | translate}}
                            </td>
                            <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                                {{ loanaccountinfo.interestRecalculationData.recalculationRestFrequencyInterval}}
                            </td>
                        </tr>
                        <tr data-ng-show="loanaccountinfo.isInterestRecalculationEnabled  && loanaccountinfo.interestRecalculationData.interestRecalculationCompoundingType.id != 0">
                            <td colspan="6"
                                ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                                <label class="control-label">{{ 'label.input.frequency.for.compounding' | translate
                                    }}</label>
                            </td>
                            <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                                <label>{{ loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyType.value}}
                                </label>
                                <label data-ng-show="loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyType.id == 3 &&
                                            loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyWeekday != null">
                                    on
                                    {{ loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyWeekday.value}}
                                </label>
                                <label data-ng-show="loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyType.id == 4 &&
                                            loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyOnDay != null">on
                                    day
                                    {{ loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyOnDay}}
                                </label>
                                <label data-ng-show="loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyType.id == 4 &&
                                            loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyOnDay == null &&
                                            loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyNthDay != null">on
                                    {{ loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyNthDay.value}}
                                    {{ loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyWeekday.value}}
                                </label>
                            </td>
                        </tr>
                        <tr data-ng-show="loanaccountinfo.isInterestRecalculationEnabled && loanaccountinfo.interestRecalculationData.interestRecalculationCompoundingType.id != 0 && loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyType.id != 1">
                            <td colspan="6"
                                ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                                <label class="control-label">{{ 'label.input.frequenc.interval.for.compounding' | translate
                                    }}</label>
                            </td>
                            <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                                <label>{{ loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyInterval}}</label>
                            </td>
                        </tr>
                        <tr class="bottomborder toppadding">
                            <td colspan="7">
                                <strong>{{'label.heading.tranchedetails' | translate}}</strong>
                            </td>
                        </tr>
                        <tr class="graybg toppadding">
                            <th colspan="4">{{'label.input.expecteddisbursementon' | translate}}</th>
                            <th colspan="3">{{'label.input.principal' | translate}}</th>
                        </tr>
                        <tr class="toppadding" ng-repeat="disbursementDetail in formData.disbursementData">
                            <td colspan="4">{{disbursementDetail.expectedDisbursementDate | DateFormat}}</td>
                            <td colspan="3">{{disbursementDetail.principal}}</td>
                        </tr>
                        <tr class="bottomborder toppadding">
                            <td colspan="7">
                                <strong>{{'label.heading.charges' | translate}}</strong>
                            </td>
                        </tr>
                        <tr class="graybg" ng-show="charges.length > 0">
                            <th colspan="2">{{'label.heading.name' | translate}}</th>
                            <th>{{'label.heading.type' | translate}}</th>
                            <th colspan="2">{{'label.heading.amount' | translate}}</th>
                            <th>{{'label.heading.collectedon' | translate}}</th>
                            <th>{{'label.heading.date' | translate}}</th>
                        </tr>
                        <tr ng-repeat="charge in charges" ng-show="charges.length>0">
                            <td colspan="2">{{charge.name}},{{charge.currency.displaySymbol}}</td>
                            <td>{{charge.chargeCalculationType.value}}</td>
                            <td colspan="2">{{charge.amount}}</td>
                            <td>{{charge.chargeTimeType.value}}</td>
                            <td>{{charge.dueDate | DateFormat}}</td>
                        </tr>
                        <tr class="graybg" ng-show="loanaccountinfo.overdueCharges.length>0">
                            <th colspan="2">{{'label.heading.name' | translate}}</th>
                            <th>{{'label.heading.type' | translate}}</th>
                            <th colspan="2">{{'label.heading.amount' | translate}}</th>
                            <th colspan="2">{{'label.heading.collectedon' | translate}}</th>
                        </tr>
                        <tr ng-repeat="charge in loanaccountinfo.overdueCharges">
                            <td colspan="2">{{charge.name}},{{charge.currency.displaySymbol}}</td>
                            <td>{{charge.chargeCalculationType.value}}</td>
                            <td colspan="2">{{charge.amount | number}}</td>
                            <td>{{charge.chargeTimeType.value}}</td>
                        </tr>
                    </table>
                    <br>
                    <table width="100%" ng-repeat="datatable in datatables">
                        <tr class="bottomborder toppadding">
                            <td colspan="7">
                                <strong>{{datatable.registeredTableName}}</strong>
                            </td>
                        </tr>
                        <tr ng-repeat="columnHeader in datatable.columnHeaderData">
                            <td colspan="6">{{ columnHeader.columnName | prettifyDataTableColumn }}</td>
                            <td ng-hide="fieldType(columnHeader.columnDisplayType) == 'DATETIME' || fieldType(columnHeader.columnDisplayType) == 'DATE'">
                                {{formData.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName]}}
                            </td>
                            <td ng-show="fieldType(columnHeader.columnDisplayType) == 'DATETIME'">
                                {{formData.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName].date | DateFormat}}
                                {{formData.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName].time
                                }}
                            </td>
                            <td ng-show="fieldType(columnHeader.columnDisplayType) == 'DATE'">
                                {{formData.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName] | DateFormat}}
                            </td>
                        </tr>
                    </table>
                    <br>
                    <br>
                    <div class="col-md-offset-5">
                        <button id="cancel3" type="reset" class="btn btn-default" ng-click="cancel()">
                            {{'label.button.cancel' | translate}}
                        </button>
                        <button id="save" type="submit" has-permission='CREATE_LOAN' class="btn btn-primary"
                                ng-show="loanaccountinfo" wz-next>{{'label.button.save' | translate}}
                        </button>
                    </div>
                    <hr>
                    <button class="btn btn-default pull-left" wz-previous>
                        <i class="fa fa-arrow-left"></i>&nbsp;&nbsp;Previous
                    </button>
                    <button class="btn btn-default pull-right" disabled>Next&nbsp;&nbsp;
                        <i class="fa fa-arrow-right"></i>
                    </button>
                </fieldset>
            </form>
        </wz-step>
    </wizard>

    <script type="text/ng-template" id="ageLimitWarning.html">
        <div class="modal-header silver">
            <h3 class="bolder">{{'label.input.age.limit.warning' | translate}}</h3>
        </div>

        <div class="modal-body">
            <div>
                {{'label.input.age.limit.warning.message' | translate}}
            </div>
            <div>
                <p>{{'label.input.age.limit.warning' | translate}} - {{loanProduct.ageLimitWarning}}
                    {{'label.input.years' | translate}}</p>
                <p>{{'label.input.age.limit.block' | translate}} - {{loanProduct.ageLimitBlock}}
                    {{'label.input.years' | translate}}</p>
            </div>
            <br>
            <button class="btn btn-warning" ng-click="cancel()">{{'label.button.cancel' | translate}}</button>
            <button class="btn btn-primary" ng-click="continue()"> {{'label.button.proceed' | translate}}</button>
        </div>
    </script>
    <script type="text/ng-template" id="ageLimitBlock.html">
        <div class="modal-header silver">
            <h3 class="bolder">{{'label.input.age.limit.block' | translate}}</h3>
        </div>

        <div class="modal-body">
            <div>
                {{'label.input.age.limit.block.message' | translate}}
            </div>
            <div>
                <div>{{'label.input.age.limit.block' | translate}} - {{loanProduct.ageLimitBlock}}
                    {{'label.input.years' | translate}}
                </div>
            </div>
            <br>
            <button class="btn btn-primary" ng-click="doNothing()"> {{'label.button.ok' | translate}}</button>
        </div>
    </script>

</div>
</div>
